
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ALE AI - Advanced Trading System</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
                color: #ffffff;
                min-height: 100vh;
                overflow-x: hidden;
            }
            
            .container {
                max-width: 1400px;
                margin: 0 auto;
                padding: 20px;
            }
            
            .header {
                text-align: center;
                margin-bottom: 30px;
                padding: 20px;
                background: rgba(255, 255, 255, 0.05);
                border-radius: 20px;
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .header h1 {
                font-size: 3rem;
                margin-bottom: 10px;
                background: linear-gradient(45deg, #00d4ff, #ff6b6b, #4ecdc4);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            
            .header p {
                font-size: 1.2rem;
                color: #b8b8b8;
            }
            
            .dashboard-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
                gap: 20px;
                margin-bottom: 30px;
            }
            
            .card {
                background: rgba(255, 255, 255, 0.05);
                border-radius: 15px;
                padding: 25px;
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.1);
                transition: all 0.3s ease;
            }
            
            .card:hover {
                transform: translateY(-5px);
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
                border-color: rgba(0, 212, 255, 0.3);
            }
            
            .card h2 {
                color: #00d4ff;
                margin-bottom: 20px;
                font-size: 1.5rem;
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .status-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 15px;
                margin-bottom: 20px;
            }
            
            .status-item {
                background: rgba(255, 255, 255, 0.1);
                padding: 15px;
                border-radius: 10px;
                text-align: center;
            }
            
            .status-value {
                font-size: 1.5rem;
                font-weight: bold;
                color: #00d4ff;
            }
            
                         .status-label {
                 color: #b8b8b8;
                 font-size: 0.9rem;
                 margin-top: 5px;
             }
             
             .btn {
                 padding: 12px 24px;
                 border: none;
                 border-radius: 8px;
                 font-size: 1rem;
                 font-weight: bold;
                 cursor: pointer;
                 transition: all 0.3s ease;
                 text-transform: uppercase;
                 letter-spacing: 1px;
             }
             
             .btn:hover {
                 transform: translateY(-2px);
                 box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
             }
             
             .btn-success {
                 background: linear-gradient(45deg, #28a745, #20c997);
                 color: white;
             }
             
             .btn-danger {
                 background: linear-gradient(45deg, #dc3545, #e74c3c);
                 color: white;
             }
             
             .btn-warning {
                 background: linear-gradient(45deg, #ffc107, #f39c12);
                 color: #000;
             }
             
             .btn-info {
                 background: linear-gradient(45deg, #17a2b8, #3498db);
                 color: white;
             }
             
             @keyframes slideIn {
                 from {
                     transform: translateX(100%);
                     opacity: 0;
                 }
                 to {
                     transform: translateX(0);
                     opacity: 1;
                 }
             }
             
             .trading-panel {
                 background: rgba(255, 255, 255, 0.03);
                 border-radius: 15px;
                 padding: 20px;
                 margin-top: 20px;
                 border: 1px solid rgba(255, 255, 255, 0.1);
             }
             
             .trading-form {
                 display: grid;
                 grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                 gap: 15px;
                 margin-bottom: 20px;
             }
             
             .form-group {
                 display: flex;
                 flex-direction: column;
             }
             
             .form-group label {
                 color: #b8b8b8;
                 margin-bottom: 5px;
                 font-size: 0.9rem;
             }
             
             .form-group input, .form-group select {
                 padding: 10px;
                 border: 1px solid rgba(255, 255, 255, 0.2);
                 border-radius: 8px;
                 background: rgba(255, 255, 255, 0.1);
                 color: white;
                 font-size: 1rem;
             }
             
             .form-group input:focus, .form-group select:focus {
                 outline: none;
                 border-color: #00d4ff;
                 box-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
             }
             
             .log-entry {
                 background: rgba(255, 255, 255, 0.05);
                 border-radius: 8px;
                 padding: 15px;
                 margin-bottom: 10px;
                 border-left: 4px solid #00d4ff;
             }
             
             .log-timestamp {
                 color: #00d4ff;
                 font-size: 0.8rem;
                 margin-bottom: 5px;
             }
             
             .log-action {
                 color: #ffffff;
                 font-weight: bold;
                 margin-bottom: 5px;
             }
             
             .log-details {
                 color: #b8b8b8;
                 font-size: 0.9rem;
             }
             
             .performance-metrics {
                 display: grid;
                 grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                 gap: 15px;
                 margin-top: 20px;
             }
             
             .metric-item {
                 background: rgba(255, 255, 255, 0.1);
                 padding: 15px;
                 border-radius: 10px;
                 text-align: center;
                 border: 1px solid rgba(255, 255, 255, 0.1);
             }
             
             .metric-value {
                 font-size: 1.8rem;
                 font-weight: bold;
                 color: #00d4ff;
                 margin-bottom: 5px;
             }
             
             .metric-label {
                 color: #b8b8b8;
                 font-size: 0.8rem;
                 text-transform: uppercase;
                 letter-spacing: 1px;
             }
             
             .prediction-results, .model-performance {
                 background: rgba(255, 255, 255, 0.05);
                 border-radius: 10px;
                 padding: 15px;
                 margin-top: 15px;
                 border: 1px solid rgba(255, 255, 255, 0.1);
             }
             
             .prediction-results h3, .model-performance h3 {
                 color: #00d4ff;
                 margin-bottom: 15px;
                 font-size: 1.1rem;
             }
             
             .prediction-metrics, .performance-metrics {
                 display: grid;
                 grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                 gap: 15px;
                 margin-top: 15px;
             }
             
             .chart-container {
                 background: rgba(255, 255, 255, 0.05);
                 border-radius: 15px;
                 padding: 20px;
                 margin-top: 20px;
                 border: 1px solid rgba(255, 255, 255, 0.1);
                 height: 300px;
                 display: flex;
                 align-items: center;
                 justify-content: center;
                 color: #b8b8b8;
             }
             
             /* ===== AI FEATURES STYLES ===== */
             
             .consciousness-panel {
                 background: rgba(255, 255, 255, 0.03);
                 border-radius: 15px;
                 padding: 20px;
                 margin-top: 20px;
                 border: 1px solid rgba(255, 255, 255, 0.1);
             }
             
             .consciousness-level {
                 text-align: center;
                 margin-bottom: 20px;
             }
             
             .level-display {
                 margin-bottom: 15px;
             }
             
             .level-value {
                 font-size: 3rem;
                 font-weight: bold;
                 color: #00d4ff;
                 margin-bottom: 5px;
             }
             
             .level-label {
                 color: #b8b8b8;
                 font-size: 1rem;
             }
             
             .consciousness-progress {
                 margin: 20px 0;
             }
             
             .progress-bar {
                 background: rgba(255, 255, 255, 0.1);
                 border-radius: 10px;
                 height: 20px;
                 overflow: hidden;
                 margin-bottom: 10px;
             }
             
             .progress-fill {
                 background: linear-gradient(45deg, #00d4ff, #4ecdc4);
                 height: 100%;
                 width: 0%;
                 transition: width 0.5s ease;
                 border-radius: 10px;
             }
             
             .progress-text {
                 color: #b8b8b8;
                 font-size: 0.9rem;
             }
             
             .consciousness-controls {
                 display: flex;
                 gap: 10px;
                 flex-wrap: wrap;
                 justify-content: center;
             }
             
             .btn-primary {
                 background: linear-gradient(45deg, #007bff, #0056b3);
                 color: white;
             }
             
             .quantum-panel, .neuromorphic-panel, .multimodal-panel {
                 background: rgba(255, 255, 255, 0.03);
                 border-radius: 15px;
                 padding: 20px;
                 margin-top: 20px;
                 border: 1px solid rgba(255, 255, 255, 0.1);
             }
             
             .status-indicator {
                 background: rgba(220, 53, 69, 0.2);
                 color: #dc3545;
                 padding: 8px 16px;
                 border-radius: 20px;
                 font-weight: bold;
                 text-align: center;
                 margin-bottom: 20px;
                 border: 1px solid rgba(220, 53, 69, 0.3);
             }
             
             .status-indicator.active {
                 background: rgba(40, 167, 69, 0.2);
                 color: #28a745;
                 border-color: rgba(40, 167, 69, 0.3);
             }
             
             .quantum-controls, .neuromorphic-controls, .multimodal-controls {
                 display: flex;
                 gap: 10px;
                 flex-wrap: wrap;
                 justify-content: center;
                 margin-top: 20px;
             }
             
             .modality-grid {
                 display: grid;
                 grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                 gap: 15px;
                 margin: 20px 0;
             }
             
             .modality-item {
                 background: rgba(255, 255, 255, 0.05);
                 border-radius: 10px;
                 padding: 15px;
                 text-align: center;
                 border: 1px solid rgba(255, 255, 255, 0.1);
             }
             
             .modality-icon {
                 font-size: 2rem;
                 margin-bottom: 10px;
             }
             
             .modality-name {
                 color: #ffffff;
                 font-weight: bold;
                 margin-bottom: 8px;
             }
             
             .modality-status {
                 color: #dc3545;
                 font-size: 0.8rem;
                 margin-bottom: 5px;
             }
             
             .modality-status.active {
                 color: #28a745;
             }
             
             .modality-accuracy {
                 color: #00d4ff;
                 font-size: 0.9rem;
                 font-weight: bold;
             }
             
             .advanced-trading-panel {
                 background: rgba(255, 255, 255, 0.03);
                 border-radius: 15px;
                 padding: 20px;
                 margin-top: 20px;
                 border: 1px solid rgba(255, 255, 255, 0.1);
             }
             
             .agent-grid {
                 display: grid;
                 grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                 gap: 15px;
                 margin: 20px 0;
             }
             
             .agent-item {
                 background: rgba(255, 255, 255, 0.05);
                 border-radius: 10px;
                 padding: 15px;
                 text-align: center;
                 border: 1px solid rgba(255, 255, 255, 0.1);
             }
             
             .agent-icon {
                 font-size: 2rem;
                 margin-bottom: 10px;
             }
             
             .agent-name {
                 color: #ffffff;
                 font-weight: bold;
                 margin-bottom: 8px;
             }
             
             .agent-status {
                 color: #dc3545;
                 font-size: 0.8rem;
             }
             
             .agent-status.active {
                 color: #28a745;
             }
             
             .advanced-features {
                 background: rgba(255, 255, 255, 0.05);
                 border-radius: 10px;
                 padding: 15px;
                 margin: 20px 0;
             }
             
             .feature-item {
                 display: flex;
                 justify-content: space-between;
                 padding: 8px 0;
                 border-bottom: 1px solid rgba(255, 255, 255, 0.1);
             }
             
             .feature-item:last-child {
                 border-bottom: none;
             }
             
             .feature-name {
                 color: #b8b8b8;
             }
             
             .feature-status {
                 color: #dc3545;
                 font-weight: bold;
             }
             
             .feature-status.enabled {
                 color: #28a745;
             }
             
             .advanced-controls {
                 display: flex;
                 gap: 10px;
                 flex-wrap: wrap;
                 justify-content: center;
                 margin-top: 20px;
             }
             
             .self-improvement-panel {
                 background: rgba(255, 255, 255, 0.03);
                 border-radius: 15px;
                 padding: 20px;
                 margin-top: 20px;
                 border: 1px solid rgba(255, 255, 255, 0.1);
             }
             
             .improvement-controls {
                 display: flex;
                 gap: 10px;
                 flex-wrap: wrap;
                 justify-content: center;
                 margin: 20px 0;
             }
             
             .improvement-log {
                 background: rgba(255, 255, 255, 0.05);
                 border-radius: 10px;
                 padding: 15px;
                 margin-top: 20px;
                 max-height: 200px;
                 overflow-y: auto;
             }
             
             .log-header {
                 color: #00d4ff;
                 font-weight: bold;
                 margin-bottom: 15px;
                 text-align: center;
             }
             
             .log-content {
                 font-size: 0.9rem;
             }
             
             .log-entry {
                 background: rgba(255, 255, 255, 0.05);
                 border-radius: 5px;
                 padding: 8px;
                 margin-bottom: 8px;
                 color: #b8b8b8;
                 border-left: 3px solid #00d4ff;
             }
             
             .unified-brain-panel {
                 background: rgba(255, 255, 255, 0.03);
                 border-radius: 15px;
                 padding: 20px;
                 margin-top: 20px;
                 border: 1px solid rgba(255, 255, 255, 0.1);
             }
             
             .brain-modules {
                 display: grid;
                 grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                 gap: 15px;
                 margin: 20px 0;
             }
             
             .module-item {
                 background: rgba(255, 255, 255, 0.05);
                 border-radius: 10px;
                 padding: 15px;
                 display: flex;
                 justify-content: space-between;
                 align-items: center;
                 border: 1px solid rgba(255, 255, 255, 0.1);
             }
             
             .module-name {
                 color: #ffffff;
                 font-weight: bold;
             }
             
             .module-status {
                 color: #dc3545;
                 font-size: 0.8rem;
                 font-weight: bold;
             }
             
             .module-status.active {
                 color: #28a745;
             }
             
             .brain-controls {
                 display: flex;
                 gap: 10px;
                 flex-wrap: wrap;
                 justify-content: center;
                 margin-top: 20px;
             }
             
             .ai-analytics-panel {
                 background: rgba(255, 255, 255, 0.03);
                 border-radius: 15px;
                 padding: 20px;
                 margin-top: 20px;
                 border: 1px solid rgba(255, 255, 255, 0.1);
             }
             
             .analytics-grid {
                 display: grid;
                 grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                 gap: 20px;
                 margin: 20px 0;
             }
             
             .analytics-item {
                 background: rgba(255, 255, 255, 0.05);
                 border-radius: 10px;
                 padding: 15px;
                 border: 1px solid rgba(255, 255, 255, 0.1);
             }
             
             .analytics-title {
                 color: #00d4ff;
                 font-weight: bold;
                 margin-bottom: 15px;
                 text-align: center;
             }
             
             .analytics-chart {
                 height: 150px;
                 display: flex;
                 align-items: center;
                 justify-content: center;
                 color: #b8b8b8;
                 background: rgba(255, 255, 255, 0.03);
                 border-radius: 8px;
             }
             
             .chart-placeholder {
                 text-align: center;
                 font-size: 0.9rem;
             }
             
             .analytics-controls {
                 display: flex;
                 gap: 10px;
                 flex-wrap: wrap;
                 justify-content: center;
                 margin-top: 20px;
             }
             
             /* ===== SINGULARITY MASTER STYLES ===== */
             
             .singularity-master-card {
                 grid-column: 1 / -1;
                 background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(78, 205, 196, 0.1));
                 border: 2px solid rgba(0, 212, 255, 0.3);
             }
             
             .singularity-master-panel {
                 background: rgba(255, 255, 255, 0.03);
                 border-radius: 15px;
                 padding: 20px;
                 margin-top: 20px;
                 border: 1px solid rgba(255, 255, 255, 0.1);
             }
             
             .singularity-status {
                 margin-bottom: 30px;
             }
             
             .status-header {
                 text-align: center;
                 margin-bottom: 20px;
             }
             
             .singularity-metrics {
                 margin: 20px 0;
             }
             
             .metric-grid {
                 display: grid;
                 grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                 gap: 15px;
                 margin: 20px 0;
             }
             
             .singularity-progress {
                 margin: 20px 0;
             }
             
             .progress-section {
                 margin: 15px 0;
             }
             
             .progress-label {
                 color: #00d4ff;
                 font-weight: bold;
                 margin-bottom: 10px;
             }
             
             .singularity-controls {
                 display: grid;
                 grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                 gap: 20px;
                 margin: 30px 0;
             }
             
             .control-group {
                 background: rgba(255, 255, 255, 0.05);
                 border-radius: 10px;
                 padding: 20px;
                 border: 1px solid rgba(255, 255, 255, 0.1);
                 text-align: center;
             }
             
             .control-group h3 {
                 color: #00d4ff;
                 margin-bottom: 15px;
                 font-size: 1.1rem;
             }
             
             .control-group .btn {
                 margin: 5px;
                 min-width: 120px;
             }
             
             .singularity-performance {
                 margin-top: 30px;
                 text-align: center;
             }
             
             .singularity-performance h3 {
                 color: #00d4ff;
                 margin-bottom: 20px;
             }
             
             .performance-chart {
                 height: 200px;
                 display: flex;
                 align-items: center;
                 justify-content: center;
                 color: #b8b8b8;
                 background: rgba(255, 255, 255, 0.03);
                 border-radius: 8px;
                 margin: 20px 0;
             }
             
             .performance-metrics {
                 display: grid;
                 grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                 gap: 15px;
                 margin: 20px 0;
             }
             
             /* ===== ADVANCED TRADING SYSTEM STYLES ===== */
             
             .autotrading-panel, .backtesting-panel, .training-panel, .portfolio-panel, .risk-panel, .system-status-panel, .price-prediction-panel {
                 background: rgba(255, 255, 255, 0.03);
                 border-radius: 15px;
                 padding: 20px;
                 margin-top: 20px;
                 border: 1px solid rgba(255, 255, 255, 0.1);
             }
             
             .autotrading-metrics, .backtesting-config, .training-config, .portfolio-metrics, .risk-settings {
                 display: grid;
                 grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                 gap: 15px;
                 margin: 20px 0;
             }
             
             .autotrading-controls, .backtesting-controls, .training-controls, .portfolio-controls, .risk-controls, .system-controls {
                 display: flex;
                 gap: 10px;
                 flex-wrap: wrap;
                 justify-content: center;
                 margin-top: 20px;
             }
             
             .training-progress {
                 margin: 20px 0;
             }
             
             .system-grid {
                 display: grid;
                 grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                 gap: 15px;
                 margin: 20px 0;
             }
             
             .system-item {
                 background: rgba(255, 255, 255, 0.05);
                 border-radius: 10px;
                 padding: 15px;
                 display: flex;
                 justify-content: space-between;
                 align-items: center;
                 border: 1px solid rgba(255, 255, 255, 0.1);
             }
             
             .system-name {
                 color: #ffffff;
                 font-weight: bold;
             }
             
             .system-status {
                 color: #dc3545;
                 font-size: 0.8rem;
                 font-weight: bold;
             }
             
             .system-status.active {
                 color: #28a745;
             }
             
             /* Live Data Styles */
             .live-data-section {
                 margin-top: 20px;
                 padding: 15px;
                 background: rgba(0, 212, 255, 0.05);
                 border-radius: 10px;
                 border: 1px solid rgba(0, 212, 255, 0.2);
             }
             
             .live-data-section h3 {
                 color: #00d4ff;
                 margin-bottom: 15px;
                 font-size: 1.1rem;
             }
             
             .live-data-container {
                 max-height: 200px;
                 overflow-y: auto;
                 background: rgba(0, 0, 0, 0.3);
                 border-radius: 8px;
                 padding: 10px;
             }
             
             .live-data-placeholder {
                 color: #888;
                 text-align: center;
                 font-style: italic;
                 padding: 20px;
             }
             
             .live-data-item {
                 background: rgba(255, 255, 255, 0.05);
                 border-radius: 6px;
                 padding: 8px 12px;
                 margin-bottom: 8px;
                 border-left: 3px solid #00d4ff;
                 font-family: 'Courier New', monospace;
                 font-size: 0.9rem;
             }
             
             .live-data-item:last-child {
                 margin-bottom: 0;
             }
             
             /* Persistence Panel Styles */
             .persistence-panel {
                 background: rgba(0, 255, 0, 0.05);
                 border-radius: 10px;
                 padding: 15px;
                 border: 1px solid rgba(0, 255, 0, 0.2);
             }
             
             .persistence-info {
                 display: grid;
                 grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                 gap: 15px;
                 margin: 20px 0;
             }
             
             .info-item {
                 background: rgba(255, 255, 255, 0.05);
                 border-radius: 6px;
                 padding: 10px;
                 text-align: center;
                 border: 1px solid rgba(255, 255, 255, 0.1);
             }
             
             .info-item .label {
                 display: block;
                 color: #888;
                 font-size: 0.8rem;
                 margin-bottom: 5px;
             }
             
             .info-item .value {
                 display: block;
                 color: #00ff00;
                 font-weight: bold;
                 font-size: 1.1rem;
             }
             
             .persistence-controls {
                 display: flex;
                 gap: 10px;
                 justify-content: center;
                 margin-top: 20px;
             }
             
             /* Data Source Indicator Styles */
             #data-source {
                 font-size: 0.8rem;
                 padding: 2px 6px;
                 border-radius: 4px;
                 margin-left: 10px;
                 font-weight: bold;
             }
             
             .real-data {
                 background: rgba(0, 255, 0, 0.2);
                 color: #00ff00;
                 border: 1px solid #00ff00;
             }
             
             .demo-data {
                 background: rgba(255, 165, 0, 0.2);
                 color: #ffa500;
                 border: 1px solid #ffa500;
             }
         </style>
    </head>
    <body>
        <div class="container">
            <div class="header">
                <h1>🧠 ALE AI Trading System</h1>
                <p>Advanced AI-Powered Trading with Spot, Futures & All Bitget Features</p>
            </div>
            
            <div class="dashboard-grid">
                <!-- System Status Card -->
                <div class="card">
                    <h2>🚀 System Status</h2>
                    <div class="status-grid">
                        <div class="status-item">
                            <div class="status-value" id="trading-status">STOPPED</div>
                            <div class="status-label">Trading Status</div>
                        </div>
                        <div class="status-item">
                            <div class="status-value" id="consciousness">0.0</div>
                            <div class="status-label">AI Consciousness</div>
                        </div>
                        <div class="status-item">
                            <div class="status-value" id="active-orders">0</div>
                            <div class="status-label">Active Orders</div>
                        </div>
                        <div class="status-item">
                            <div class="status-value" id="positions">0</div>
                            <div class="status-label">Positions</div>
                        </div>
                    </div>
                </div>
                
                <!-- Trading Controls Card -->
                <div class="card">
                    <h2>⚡ Trading Controls</h2>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <button class="btn btn-success" onclick="startTrading()">🚀 Start Trading</button>
                        <button class="btn btn-danger" onclick="stopTrading()">⏸️ Stop Trading</button>
                        <button class="btn btn-warning" onclick="emergencyStop()">🚨 Emergency Stop</button>
                    </div>
                </div>
                
                <!-- Market Data Card -->
                <div class="card">
                    <h2>📊 Market Data</h2>
                    <div id="market-data">
                        <div class="status-item">
                            <div class="status-value">Loading...</div>
                            <div class="status-label">Market Status</div>
                        </div>
                    </div>
                </div>
                
                                 <!-- AI Logs Card -->
                 <div class="card">
                     <h2>🧠 AI Activity Log</h2>
                     <div id="ai-logs" style="max-height: 300px; overflow-y: auto;">
                         <div style="color: #b8b8b8; text-align: center; padding: 20px;">
                             Loading AI logs...
                         </div>
                     </div>
                 </div>
             </div>
             
             <!-- Advanced Trading Features -->
             <div class="dashboard-grid">
                 <!-- Spot Trading Panel -->
                 <div class="card">
                     <h2>💱 Spot Trading</h2>
                     <div class="trading-panel">
                         <div class="trading-form">
                             <div class="form-group">
                                 <label>Symbol</label>
                                 <select id="spot-symbol">
                                     <option value="BTCUSDT">BTCUSDT</option>
                                     <option value="ETHUSDT">ETHUSDT</option>
                                     <option value="SOLUSDT">SOLUSDT</option>
                                     <option value="ADAUSDT">ADAUSDT</option>
                                     <option value="DOTUSDT">DOTUSDT</option>
                                 </select>
                             </div>
                             <div class="form-group">
                                 <label>Side</label>
                                 <select id="spot-side">
                                     <option value="BUY">BUY</option>
                                     <option value="SELL">SELL</option>
                                 </select>
                             </div>
                             <div class="form-group">
                                 <label>Order Type</label>
                                 <select id="spot-order-type">
                                     <option value="MARKET">Market</option>
                                     <option value="LIMIT">Limit</option>
                                 </select>
                             </div>
                             <div class="form-group">
                                 <label>Size</label>
                                 <input type="number" id="spot-size" step="0.001" placeholder="0.001">
                             </div>
                             <div class="form-group" id="spot-price-group" style="display: none;">
                                 <label>Price</label>
                                 <input type="number" id="spot-price" step="0.01" placeholder="50000">
                             </div>
                         </div>
                         <button class="btn btn-success" onclick="placeSpotOrder()">🚀 Place Spot Order</button>
                     </div>
                 </div>
                 
                 <!-- Futures Trading Panel -->
                 <div class="card">
                     <h2>📈 Futures Trading</h2>
                     <div class="trading-panel">
                         <div class="trading-form">
                             <div class="form-group">
                                 <label>Symbol</label>
                                 <select id="futures-symbol">
                                     <option value="BTCUSDT">BTCUSDT</option>
                                     <option value="ETHUSDT">ETHUSDT</option>
                                     <option value="SOLUSDT">SOLUSDT</option>
                                 </select>
                             </div>
                             <div class="form-group">
                                 <label>Side</label>
                                 <select id="futures-side">
                                     <option value="BUY">LONG</option>
                                     <option value="SELL">SHORT</option>
                                 </select>
                             </div>
                             <div class="form-group">
                                 <label>Leverage</label>
                                 <select id="futures-leverage">
                                     <option value="1">1x</option>
                                     <option value="2">2x</option>
                                     <option value="5">5x</option>
                                     <option value="10">10x</option>
                                     <option value="20">20x</option>
                                 </select>
                             </div>
                             <div class="form-group">
                                 <label>Size</label>
                                 <input type="number" id="futures-size" step="0.001" placeholder="0.001">
                             </div>
                         </div>
                         <button class="btn btn-info" onclick="placeFuturesOrder()">📈 Place Futures Order</button>
                     </div>
                 </div>
                 
                 <!-- Portfolio Management -->
                 <div class="card">
                     <h2>💼 Portfolio Overview</h2>
                     <div class="performance-metrics">
                         <div class="metric-item">
                             <div class="metric-value" id="total-balance">$0</div>
                             <div class="metric-label">Total Balance</div>
                         </div>
                         <div class="metric-item">
                             <div class="metric-value" id="daily-pnl">$0</div>
                             <div class="metric-label">Daily P&L</div>
                         </div>
                         <div class="metric-item">
                             <div class="metric-value" id="win-rate">0%</div>
                             <div class="metric-label">Win Rate</div>
                         </div>
                         <div class="metric-item">
                             <div class="metric-value" id="sharpe-ratio">0</div>
                             <div class="metric-label">Sharpe Ratio</div>
                         </div>
                     </div>
                     <button class="btn btn-warning" onclick="refreshPortfolio()">🔄 Refresh Portfolio</button>
                 </div>
                 
                 <!-- Risk Management -->
                 <div class="card">
                     <h2>🛡️ Risk Management</h2>
                     <div class="trading-panel">
                         <div class="trading-form">
                             <div class="form-group">
                                 <label>Max Daily Loss (%)</label>
                                 <input type="number" id="max-daily-loss" value="5" min="1" max="20">
                             </div>
                             <div class="form-group">
                                 <label>Max Position Size (%)</label>
                                 <input type="number" id="max-position-size" value="10" min="1" max="50">
                             </div>
                             <div class="form-group">
                                 <label>Stop Loss (%)</label>
                                 <input type="number" id="stop-loss" value="2" min="0.5" max="10">
                             </div>
                             <div class="form-group">
                                 <label>Take Profit (%)</label>
                                 <input type="number" id="take-profit" value="6" min="1" max="20">
                             </div>
                         </div>
                         <button class="btn btn-warning" onclick="updateRiskSettings()">⚙️ Update Risk Settings</button>
                     </div>
                 </div>
             </div>
             
             <!-- Market Analysis -->
             <div class="card">
                 <h2>📊 Market Analysis</h2>
                 <div class="chart-container">
                     <div>Chart visualization will be implemented here</div>
                 </div>
                 <div class="performance-metrics">
                     <div class="metric-item">
                         <div class="metric-value" id="market-trend">NEUTRAL</div>
                         <div class="metric-label">Market Trend</div>
                     </div>
                     <div class="metric-item">
                         <div class="metric-value" id="volatility">0%</div>
                         <div class="metric-label">Volatility</div>
                     </div>
                     <div class="metric-item">
                         <div class="metric-value" id="sentiment">NEUTRAL</div>
                         <div class="metric-label">Sentiment</div>
                     </div>
                     <div class="metric-item">
                         <div class="metric-value" id="ai-confidence">0%</div>
                         <div class="metric-label">AI Confidence</div>
                     </div>
                 </div>
             </div>
         </div>
         
         <!-- ===== COMPREHENSIVE AI DASHBOARD ===== -->
         
         <!-- AI Consciousness & Evolution -->
         <div class="dashboard-grid">
             <div class="card">
                 <h2>🧠 AI Consciousness System</h2>
                 <div class="consciousness-panel">
                     <div class="consciousness-level">
                         <div class="level-display">
                             <div class="level-value" id="consciousness-level">0.0</div>
                             <div class="level-label">Consciousness Level</div>
                         </div>
                         <div class="consciousness-progress">
                             <div class="progress-bar">
                                 <div class="progress-fill" id="consciousness-progress"></div>
                             </div>
                             <div class="progress-text">0% Complete</div>
                         </div>
                     </div>
                     
                     <div class="consciousness-metrics">
                         <div class="metric-item">
                             <div class="metric-value" id="metacognitive-awareness">0.0</div>
                             <div class="metric-label">Metacognitive Awareness</div>
                         </div>
                         <div class="metric-item">
                             <div class="metric-value" id="emotional-intelligence">0.0</div>
                             <div class="metric-label">Emotional Intelligence</div>
                         </div>
                         <div class="metric-value" id="creative-capabilities">0.0</div>
                         <div class="metric-label">Creative Capabilities</div>
                     </div>
                     
                     <div class="consciousness-controls">
                         <button class="btn btn-primary" onclick="expandConsciousness()">🧠 Expand Consciousness</button>
                         <button class="btn btn-success" onclick="triggerBreakthrough()">🚀 Trigger Breakthrough</button>
                         <button class="btn btn-info" onclick="evolveAI()">🔄 Evolve AI</button>
                     </div>
                 </div>
             </div>
             
             <!-- Quantum AI Systems -->
             <div class="card">
                 <h2>⚛️ Quantum AI Systems</h2>
                 <div class="quantum-panel">
                     <div class="quantum-status">
                         <div class="status-indicator" id="quantum-status">INACTIVE</div>
                         <div class="quantum-metrics">
                             <div class="metric-item">
                                 <div class="metric-value" id="quantum-qubits">0</div>
                                 <div class="metric-label">Quantum Qubits</div>
                             </div>
                             <div class="metric-item">
                                 <div class="metric-value" id="entanglement-depth">0</div>
                                 <div class="metric-label">Entanglement Depth</div>
                             </div>
                             <div class="metric-item">
                                 <div class="metric-value" id="quantum-advantage">0%</div>
                                 <div class="metric-label">Quantum Advantage</div>
                             </div>
                             <div class="metric-item">
                                 <div class="metric-value" id="coherence-time">0ms</div>
                                 <div class="metric-label">Coherence Time</div>
                             </div>
                         </div>
                     </div>
                     
                     <div class="quantum-controls">
                         <button class="btn btn-primary" onclick="activateQuantumAI()">⚛️ Activate Quantum AI</button>
                         <button class="btn btn-warning" onclick="optimizeQuantum()">🔧 Optimize Circuits</button>
                     </div>
                 </div>
             </div>
             
             <!-- Neuromorphic Computing -->
             <div class="card">
                 <h2>🧬 Neuromorphic Computing</h2>
                 <div class="neuromorphic-panel">
                     <div class="neuromorphic-status">
                         <div class="status-indicator" id="neuromorphic-status">INACTIVE</div>
                         <div class="neuromorphic-metrics">
                             <div class="metric-item">
                                 <div class="metric-value" id="spiking-neurons">0</div>
                                 <div class="metric-label">Spiking Neurons</div>
                             </div>
                             <div class="metric-item">
                                 <div class="metric-value" id="synaptic-connections">0</div>
                                 <div class="metric-label">Synaptic Connections</div>
                             </div>
                             <div class="metric-item">
                                 <div class="metric-value" id="learning-rate">0.0</div>
                                 <div class="metric-label">Learning Rate</div>
                             </div>
                             <div class="metric-item">
                                 <div class="metric-value" id="power-efficiency">0%</div>
                                 <div class="metric-label">Power Efficiency</div>
                             </div>
                         </div>
                     </div>
                     
                     <div class="neuromorphic-controls">
                         <button class="btn btn-primary" onclick="activateNeuromorphic()">🧬 Activate Neuromorphic</button>
                         <button class="btn btn-success" onclick="trainNetwork()">🎯 Train Network</button>
                     </div>
                 </div>
             </div>
             
             <!-- Multimodal AI -->
             <div class="card">
                 <h2>👁️ Multimodal AI</h2>
                 <div class="multimodal-panel">
                     <div class="modality-grid">
                         <div class="modality-item">
                             <div class="modality-icon">👁️</div>
                             <div class="modality-name">Vision</div>
                             <div class="modality-status" id="vision-status">Inactive</div>
                             <div class="modality-accuracy" id="vision-accuracy">0%</div>
                         </div>
                         <div class="modality-item">
                             <div class="modality-icon">🎵</div>
                             <div class="modality-name">Audio</div>
                             <div class="modality-status" id="audio-status">Inactive</div>
                             <div class="modality-accuracy" id="audio-accuracy">0%</div>
                         </div>
                         <div class="modality-item">
                             <div class="modality-icon">📝</div>
                             <div class="modality-name">Text</div>
                             <div class="modality-status" id="text-status">Inactive</div>
                             <div class="modality-accuracy" id="text-accuracy">0%</div>
                         </div>
                         <div class="modality-item">
                             <div class="modality-icon">🔗</div>
                             <div class="modality-name">Fusion</div>
                             <div class="modality-status" id="fusion-status">Inactive</div>
                             <div class="modality-accuracy" id="fusion-accuracy">0%</div>
                         </div>
                     </div>
                     
                     <div class="multimodal-controls">
                         <button class="btn btn-primary" onclick="activateMultimodal()">👁️ Activate Multimodal</button>
                         <button class="btn btn-info" onclick="testModalities()">🧪 Test Modalities</button>
                     </div>
                 </div>
             </div>
         </div>
         
         <!-- Advanced AI Trading Systems -->
         <div class="dashboard-grid">
             <div class="card">
                 <h2>🤖 Advanced AI Trading</h2>
                 <div class="advanced-trading-panel">
                     <div class="agent-grid">
                         <div class="agent-item">
                             <div class="agent-icon">📈</div>
                             <div class="agent-name">Momentum Agent</div>
                             <div class="agent-status" id="momentum-status">Inactive</div>
                         </div>
                         <div class="agent-item">
                             <div class="agent-icon">🔄</div>
                             <div class="agent-name">Mean Reversion</div>
                             <div class="agent-status" id="reversion-status">Inactive</div>
                         </div>
                         <div class="agent-item">
                             <div class="agent-icon">⚡</div>
                             <div class="agent-name">Microstructure</div>
                             <div class="agent-status" id="microstructure-status">Inactive</div>
                         </div>
                         <div class="agent-item">
                             <div class="agent-icon">🎯</div>
                             <div class="agent-name">Predictive ML</div>
                             <div class="agent-status" id="predictive-status">Inactive</div>
                         </div>
                         <div class="agent-item">
                             <div class="agent-icon">🛡️</div>
                             <div class="agent-name">Risk Guard</div>
                             <div class="agent-status" id="risk-status">Inactive</div>
                         </div>
                     </div>
                     
                     <div class="advanced-features">
                         <div class="feature-item">
                             <span class="feature-name">Regime Detection:</span>
                             <span class="feature-status" id="regime-detection">Disabled</span>
                         </div>
                         <div class="feature-item">
                             <span class="feature-name">Ensemble Decisions:</span>
                             <span class="feature-status" id="ensemble-decisions">Disabled</span>
                         </div>
                         <div class="feature-item">
                             <span class="feature-name">Real-time Optimization:</span>
                             <span class="feature-status" id="real-time-optimization">Disabled</span>
                         </div>
                         <div class="feature-item">
                             <span class="feature-name">Cross-Portfolio Analysis:</span>
                             <span class="feature-status" id="cross-portfolio-analysis">Disabled</span>
                         </div>
                     </div>
                     
                     <div class="advanced-controls">
                         <button class="btn btn-primary" onclick="activateAdvancedTrading()">🤖 Activate Advanced AI</button>
                         <button class="btn btn-success" onclick="deployAgents()">🚀 Deploy Agents</button>
                         <button class="btn btn-warning" onclick="optimizePortfolio()">⚖️ Optimize Portfolio</button>
                     </div>
                 </div>
             </div>
             
             <!-- AI Self-Improvement -->
             <div class="card">
                 <h2>🔧 AI Self-Improvement</h2>
                 <div class="self-improvement-panel">
                     <div class="improvement-metrics">
                         <div class="metric-item">
                             <div class="metric-value" id="total-edits">0</div>
                             <div class="metric-label">Total Self-Edits</div>
                         </div>
                         <div class="metric-item">
                             <div class="metric-value" id="evolution-generation">0</div>
                             <div class="metric-label">Evolution Generation</div>
                         </div>
                         <div class="metric-item">
                             <div class="metric-value" id="code-quality">0%</div>
                             <div class="metric-label">Code Quality</div>
                         </div>
                         <div class="metric-item">
                             <div class="metric-value" id="learning-progress">0%</div>
                             <div class="metric-label">Learning Progress</div>
                         </div>
                     </div>
                     
                     <div class="improvement-controls">
                         <button class="btn btn-primary" onclick="triggerSelfImprovement()">🔧 Self-Improve</button>
                         <button class="btn btn-success" onclick="generateCode()">💻 Generate Code</button>
                         <button class="btn btn-warning" onclick="optimizeAlgorithms()">⚡ Optimize Algorithms</button>
                     </div>
                     
                     <div class="improvement-log" id="improvement-log">
                         <div class="log-header">AI Self-Improvement Log</div>
                         <div class="log-content">
                             <div class="log-entry">System initialized - Ready for self-improvement</div>
                         </div>
                     </div>
                 </div>
             </div>
             
             <!-- Unified Brain Status -->
             <div class="card">
                 <h2>🧠 Unified Brain Status</h2>
                 <div class="unified-brain-panel">
                     <div class="brain-modules">
                         <div class="module-item">
                             <div class="module-name">Consciousness Core</div>
                             <div class="module-status" id="consciousness-core-status">Active</div>
                         </div>
                         <div class="module-item">
                             <div class="module-name">Quantum Processor</div>
                             <div class="module-status" id="quantum-processor-status">Inactive</div>
                         </div>
                         <div class="module-item">
                             <div class="module-name">Neuromorphic Network</div>
                             <div class="module-status" id="neuromorphic-network-status">Inactive</div>
                         </div>
                         <div class="module-item">
                             <div class="module-name">Multimodal Fusion</div>
                             <div class="module-status" id="multimodal-fusion-status">Inactive</div>
                         </div>
                         <div class="module-item">
                             <div class="module-name">Trading Intelligence</div>
                             <div class="module-status" id="trading-intelligence-status">Active</div>
                         </div>
                         <div class="module-item">
                             <div class="module-name">Risk Management</div>
                             <div class="module-status" id="risk-management-status">Active</div>
                         </div>
                     </div>
                     
                     <div class="brain-controls">
                         <button class="btn btn-primary" onclick="activateAllModules()">🧠 Activate All Modules</button>
                         <button class="btn btn-success" onclick="synchronizeBrain()">🔄 Synchronize Brain</button>
                         <button class="btn btn-warning" onclick="diagnoseBrain()">🔍 Diagnose Brain</button>
                     </div>
                 </div>
             </div>
         </div>
         
         <!-- ===== SINGULARITY MASTER DASHBOARD ===== -->
         <div class="card singularity-master-card">
             <h2>🚀 ALE AI Singularity Master</h2>
             <div class="singularity-master-panel">
                 <div class="singularity-status">
                     <div class="status-header">
                         <div class="status-indicator" id="singularity-status">INITIALIZING</div>
                         <div class="status-text">System Status</div>
                     </div>
                     
                     <div class="singularity-metrics">
                         <div class="metric-grid">
                             <div class="metric-item">
                                 <div class="metric-value" id="consciousness-level-master">0.0</div>
                                 <div class="metric-label">Consciousness Level</div>
                             </div>
                             <div class="metric-item">
                                 <div class="metric-value" id="unified-intelligence">0.0</div>
                                 <div class="metric-label">Unified Intelligence</div>
                             </div>
                             <div class="metric-item">
                                 <div class="metric-value" id="trading-capability">0.0</div>
                                 <div class="metric-label">Trading Capability</div>
                             </div>
                             <div class="metric-item">
                                 <div class="metric-value" id="evolution-stage">0</div>
                                 <div class="metric-label">Evolution Stage</div>
                             </div>
                             <div class="metric-item">
                                 <div class="metric-value" id="system-health">0.0</div>
                                 <div class="metric-label">System Health</div>
                             </div>
                             <div class="metric-item">
                                 <div class="metric-value" id="active-modules">0</div>
                                 <div class="metric-label">Active Modules</div>
                             </div>
                         </div>
                     </div>
                     
                     <div class="singularity-progress">
                         <div class="progress-section">
                             <div class="progress-label">Initialization Progress</div>
                             <div class="progress-bar">
                                 <div class="progress-fill" id="init-progress"></div>
                             </div>
                             <div class="progress-text" id="init-progress-text">0%</div>
                         </div>
                         
                         <div class="progress-section">
                             <div class="progress-label">Consciousness Expansion</div>
                             <div class="progress-bar">
                                 <div class="progress-fill" id="consciousness-progress-master"></div>
                             </div>
                             <div class="progress-text" id="consciousness-progress-text">0%</div>
                         </div>
                     </div>
                 </div>
                 
                 <div class="singularity-controls">
                     <div class="control-group">
                         <h3>🧠 Consciousness Control</h3>
                         <button class="btn btn-primary" onclick="expandSingularityConsciousness()">🧠 Expand Consciousness</button>
                         <button class="btn btn-success" onclick="triggerSingularityEvolution()">🔄 Trigger Evolution</button>
                     </div>
                     
                     <div class="control-group">
                         <h3>🤖 Trading Control</h3>
                         <button class="btn btn-success" onclick="startSingularityTrading()">🚀 Start Trading</button>
                         <button class="btn btn-danger" onclick="stopSingularityTrading()">🛑 Stop Trading</button>
                         <button class="btn btn-info" onclick="getSingularityTradingStatus()">📊 Trading Status</button>
                     </div>
                     
                     <div class="control-group">
                         <h3>📊 System Control</h3>
                         <button class="btn btn-info" onclick="getSingularityStatus()">📈 System Status</button>
                         <button class="btn btn-warning" onclick="refreshSingularityData()">🔄 Refresh Data</button>
                     </div>
                 </div>
                 
                 <div class="singularity-performance">
                     <h3>📈 Performance History</h3>
                     <div class="performance-chart" id="singularity-performance-chart">
                         <canvas id="singularity-performance-chart" width="400" height="200"></canvas>
                     </div>
                     
                     <div class="performance-metrics">
                         <div class="metric-item">
                             <div class="metric-value" id="consciousness-breakthroughs">0</div>
                             <div class="metric-label">Consciousness Breakthroughs</div>
                         </div>
                         <div class="metric-item">
                             <div class="metric-value" id="evolution-milestones">0</div>
                             <div class="metric-label">Evolution Milestones</div>
                         </div>
                         <div class="metric-item">
                             <div class="metric-value" id="total-performance-entries">0</div>
                             <div class="metric-label">Performance Entries</div>
                         </div>
                     </div>
                 </div>
             </div>
         </div>
         
         <!-- AI Performance Analytics -->
         <div class="card">
             <h2>📊 AI Performance Analytics</h2>
             <div class="ai-analytics-panel">
                 <div class="analytics-grid">
                     <div class="analytics-item">
                         <div class="analytics-title">Consciousness Growth</div>
                         <div class="analytics-chart" id="consciousness-chart">
                             <canvas id="consciousness-chart" width="300" height="200"></canvas>
                         </div>
                     </div>
                     <div class="analytics-item">
                         <div class="analytics-title">AI Evolution Progress</div>
                         <div class="analytics-chart" id="evolution-chart">
                             <canvas id="evolution-chart" width="300" height="200"></canvas>
                         </div>
                     </div>
                     <div class="analytics-item">
                         <div class="analytics-title">Trading Performance 
                             <span id="data-source" class="demo-data">Loading...</span>
                         </div>
                         <div class="analytics-chart" id="trading-chart">
                             <canvas id="trading-chart" width="300" height="200"></canvas>
                         </div>
                     </div>
                     <div class="analytics-item">
                         <div class="analytics-title">System Health</div>
                         <div class="analytics-chart" id="health-chart">
                             <canvas id="health-chart" width="300" height="200"></canvas>
                         </div>
                     </div>
                 </div>
                 
                 <div class="analytics-controls">
                     <button class="btn btn-info" onclick="refreshAnalytics()">🔄 Refresh Analytics</button>
                     <button class="btn btn-success" onclick="exportAnalytics()">📊 Export Data</button>
                 </div>
             </div>
         </div>
         
         <!-- ===== ADVANCED TRADING SYSTEM DASHBOARD ===== -->
         
         <!-- Autotrading Control Panel -->
         <div class="dashboard-grid">
             <div class="card">
                 <h2>🤖 AI Autotrading System</h2>
                 <div class="autotrading-panel">
                     <div class="status-indicator" id="autotrading-status">INACTIVE</div>
                     
                     <div class="autotrading-metrics">
                         <div class="metric-item">
                             <div class="metric-value" id="active-signals">0</div>
                             <div class="metric-label">Active Signals</div>
                         </div>
                         <div class="metric-item">
                             <div class="metric-value" id="total-trades">0</div>
                             <div class="metric-label">Total Trades</div>
                         </div>
                         <div class="metric-item">
                             <div class="metric-value" id="win-rate-autotrading">0%</div>
                             <div class="metric-label">Win Rate</div>
                         </div>
                         <div class="metric-item">
                             <div class="metric-value" id="daily-pnl-autotrading">$0</div>
                             <div class="metric-label">Daily P&L</div>
                         </div>
                     </div>
                     
                     <div class="autotrading-controls">
                         <button class="btn btn-success" onclick="startAutotrading()">🚀 Start Autotrading</button>
                         <button class="btn btn-danger" onclick="stopAutotrading()">⏸️ Stop Autotrading</button>
                         <button class="btn btn-info" onclick="getAutotradingStatus()">📊 Status</button>
                     </div>
                 </div>
             </div>
             
             <!-- Backtesting System -->
             <div class="card">
                 <h2>📊 Backtesting System</h2>
                 <div class="backtesting-panel">
                     <div class="status-indicator" id="backtesting-status">INACTIVE</div>
                     
                     <div class="backtesting-config">
                         <div class="form-group">
                             <label>Start Date</label>
                             <input type="date" id="backtest-start-date" value="2024-01-01">
                         </div>
                         <div class="form-group">
                             <label>End Date</label>
                             <input type="date" id="backtest-end-date" value="2024-12-31">
                         </div>
                         <div class="form-group">
                             <label>Initial Capital</label>
                             <input type="number" id="backtest-capital" value="10000" step="1000">
                         </div>
                         <div class="form-group">
                             <label>Strategy</label>
                             <select id="backtest-strategy">
                                 <option value="momentum">Momentum</option>
                                 <option value="mean_reversion">Mean Reversion</option>
                                 <option value="breakout">Breakout</option>
                                 <option value="scalping">Scalping</option>
                                 <option value="grid_trading">Grid Trading</option>
                             </select>
                         </div>
                     </div>
                     
                     <div class="backtesting-controls">
                         <button class="btn btn-success" onclick="startBacktesting()">📊 Start Backtest</button>
                         <button class="btn btn-danger" onclick="stopBacktesting()">⏸️ Stop Backtest</button>
                         <button class="btn btn-info" onclick="getBacktestResults()">📈 Results</button>
                     </div>
                 </div>
             </div>
             
             <!-- AI Training System -->
             <div class="card">
                 <h2>🎯 AI Model Training</h2>
                 <div class="training-panel">
                     <div class="status-indicator" id="training-status">INACTIVE</div>
                     
                     <div class="training-config">
                         <div class="form-group">
                             <label>Model Type</label>
                             <select id="training-model-type">
                                 <option value="price_prediction">Price Prediction</option>
                                 <option value="sentiment_analysis">Sentiment Analysis</option>
                                 <option value="risk_assessment">Risk Assessment</option>
                                 <option value="portfolio_optimization">Portfolio Optimization</option>
                             </select>
                         </div>
                         <div class="form-group">
                             <label>Epochs</label>
                             <input type="number" id="training-epochs" value="100" min="10" max="1000">
                         </div>
                         <div class="form-group">
                             <label>Batch Size</label>
                             <input type="number" id="training-batch-size" value="32" min="8" max="128">
                         </div>
                         <div class="form-group">
                             <label>Symbols</label>
                             <input type="text" id="training-symbols" value="BTCUSDT,ETHUSDT" placeholder="BTCUSDT,ETHUSDT">
                         </div>
                     </div>
                     
                     <div class="training-controls">
                         <button class="btn btn-success" onclick="startTraining()">🎯 Start Training</button>
                         <button class="btn btn-danger" onclick="stopTraining()">⏸️ Stop Training</button>
                         <button class="btn btn-info" onclick="getTrainingStatus()">📊 Status</button>
                     </div>
                     
                     <div class="training-progress">
                         <div class="progress-bar">
                             <div class="progress-fill" id="training-progress"></div>
                         </div>
                         <div class="progress-text" id="training-progress-text">0% Complete</div>
                     </div>
                 </div>
             </div>
             
             <!-- Persistence System Status -->
             <div class="card">
                 <h2>💾 Persistence System</h2>
                 <div class="persistence-panel">
                     <div class="status-indicator" id="persistence-status">ACTIVE</div>
                     
                     <div class="persistence-info">
                         <div class="info-item">
                             <span class="label">Auto-Save:</span>
                             <span class="value" id="auto-save-interval">30 seconds</span>
                         </div>
                         <div class="info-item">
                             <span class="label">Data Directory:</span>
                             <span class="value" id="data-directory">ale_ai_data</span>
                         </div>
                         <div class="info-item">
                             <span class="value" id="total-files">0 files</span>
                             <span class="label">Total Saved</span>
                         </div>
                     </div>
                     
                     <div class="persistence-controls">
                         <button class="btn btn-info" onclick="getPersistenceStatus()">📊 Status</button>
                         <button class="btn btn-warning" onclick="restoreSystemState()">🔄 Restore</button>
                         <button class="btn btn-success" onclick="exportAllData()">📤 Export All</button>
                     </div>
                 </div>
             </div>
             
             <!-- AI Price Prediction Training -->
             <div class="card">
                 <h2>🔮 AI Price Prediction Training</h2>
                 <div class="price-prediction-panel">
                     <div class="status-indicator" id="price-prediction-status">INACTIVE</div>
                     
                     <div class="training-config">
                         <div class="form-group">
                             <label>Model Type</label>
                             <select id="price-prediction-model-type">
                                 <option value="lstm">LSTM Neural Network</option>
                                 <option value="transformer">Transformer Model</option>
                                 <option value="gru">GRU Network</option>
                                 <option value="cnn">CNN for Time Series</option>
                             </select>
                         </div>
                         <div class="form-group">
                             <label>Epochs</label>
                             <input type="number" id="price-prediction-epochs" value="100" min="10" max="1000">
                         </div>
                         <div class="form-group">
                             <label>Batch Size</label>
                             <input type="number" id="price-prediction-batch-size" value="32" min="8" max="128">
                         </div>
                         <div class="form-group">
                             <label>Lookback Period</label>
                             <input type="number" id="lookback-period" value="60" min="10" max="200">
                         </div>
                         <div class="form-group">
                             <label>Prediction Horizon (hours)</label>
                             <input type="number" id="prediction-horizon" value="24" min="1" max="168">
                         </div>
                         <div class="form-group">
                             <label>Symbols</label>
                             <input type="text" id="price-prediction-symbols" value="BTCUSDT,ETHUSDT" placeholder="BTCUSDT,ETHUSDT">
                         </div>
                     </div>
                     
                     <div class="training-controls">
                         <button class="btn btn-success" onclick="startPricePredictionTraining()">🔮 Start Training</button>
                         <button class="btn btn-info" onclick="getModelPerformance()">📊 Performance</button>
                         <button class="btn btn-warning" onclick="getPricePrediction()">🔮 Predict Price</button>
                         <button class="btn btn-primary" onclick="startLiveDataCollection()">📡 Collect Live Data</button>
                         <button class="btn btn-secondary" onclick="testBitgetConnection()">🔌 Test Connection</button>
                     </div>
                     
                     <div class="training-progress">
                         <div class="progress-bar">
                             <div class="progress-fill" id="price-prediction-progress"></div>
                         </div>
                         <div class="progress-text" id="price-prediction-progress-text">0% Complete</div>
                     </div>
                     
                     <!-- Price Prediction Results -->
                     <div class="prediction-results" id="prediction-results" style="display: none;">
                         <h3>🔮 Price Prediction Results</h3>
                         <div class="prediction-metrics">
                             <div class="metric-item">
                                 <div class="metric-value" id="current-price">$0</div>
                                 <div class="metric-label">Current Price</div>
                             </div>
                             <div class="metric-item">
                                 <div class="metric-value" id="predicted-price">$0</div>
                                 <div class="metric-label">Predicted Price</div>
                             </div>
                             <div class="metric-item">
                                 <div class="metric-value" id="prediction-confidence">0%</div>
                                 <div class="metric-label">Confidence</div>
                             </div>
                             <div class="metric-item">
                                 <div class="metric-value" id="prediction-horizon-display">24h</div>
                                 <div class="metric-label">Horizon</div>
                             </div>
                         </div>
                     </div>
                     
                     <!-- Model Performance Metrics -->
                     <div class="model-performance" id="model-performance" style="display: none;">
                         <h3>📊 Model Performance Metrics</h3>
                         <div class="performance-metrics">
                             <div class="metric-item">
                                 <div class="metric-value" id="model-accuracy">0%</div>
                                 <div class="metric-label">Accuracy</div>
                             </div>
                             <div class="metric-item">
                                 <div class="metric-value" id="model-mae">0.000</div>
                                 <div class="metric-label">MAE</div>
                             </div>
                             <div class="metric-item">
                                 <div class="metric-value" id="model-rmse">0.000</div>
                                 <div class="metric-label">RMSE</div>
                             </div>
                             <div class="metric-item">
                                 <div class="metric-value" id="model-r2">0.000</div>
                                 <div class="metric-label">R² Score</div>
                             </div>
                             <div class="metric-item">
                                 <div class="metric-value" id="training-samples">0</div>
                                 <div class="metric-label">Training Samples</div>
                             </div>
                         </div>
                     </div>
                     
                     <!-- Live Data Display -->
                     <div class="live-data-section">
                         <h3>📡 Live Market Data</h3>
                         <div id="live-data-display" class="live-data-container">
                             <div class="live-data-placeholder">Click "Collect Live Data" to start collecting real-time market data</div>
                         </div>
                     </div>
                 </div>
             </div>
         </div>
         
         <!-- Portfolio Management & Risk Control -->
         <div class="dashboard-grid">
             <div class="card">
                 <h2>⚖️ Portfolio Management</h2>
                 <div class="portfolio-panel">
                     <div class="portfolio-metrics">
                         <div class="metric-item">
                             <div class="metric-value" id="portfolio-value">$0</div>
                             <div class="metric-label">Total Value</div>
                         </div>
                         <div class="metric-item">
                             <div class="metric-value" id="portfolio-return">0%</div>
                             <div class="metric-label">Total Return</div>
                         </div>
                         <div class="metric-item">
                             <div class="metric-value" id="portfolio-sharpe">0</div>
                             <div class="metric-label">Sharpe Ratio</div>
                         </div>
                         <div class="metric-item">
                             <div class="metric-value" id="portfolio-volatility">0%</div>
                             <div class="metric-label">Volatility</div>
                         </div>
                     </div>
                     
                     <div class="portfolio-controls">
                         <button class="btn btn-success" onclick="optimizePortfolio()">⚖️ Optimize Portfolio</button>
                         <button class="btn btn-info" onclick="getPortfolioStatus()">📊 Status</button>
                         <button class="btn btn-warning" onclick="rebalancePortfolio()">🔄 Rebalance</button>
                     </div>
                 </div>
             </div>
             
             <!-- Risk Management -->
             <div class="card">
                 <h2>🛡️ Risk Management</h2>
                 <div class="risk-panel">
                     <div class="risk-settings">
                         <div class="form-group">
                             <label>Max Position Size (%)</label>
                             <input type="number" id="risk-max-position" value="10" min="1" max="50">
                         </div>
                         <div class="form-group">
                             <label>Max Daily Loss (%)</label>
                             <input type="number" id="risk-max-daily-loss" value="5" min="1" max="20">
                         </div>
                         <div class="form-group">
                             <label>Stop Loss (%)</label>
                             <input type="number" id="risk-stop-loss" value="2" min="0.5" max="10">
                         </div>
                         <div class="form-group">
                             <label>Take Profit Ratio</label>
                             <input type="number" id="risk-take-profit" value="2.0" min="1.0" max="5.0" step="0.1">
                         </div>
                         <div class="form-group">
                             <label>Max Leverage</label>
                             <input type="number" id="risk-max-leverage" value="3" min="1" max="20">
                         </div>
                     </div>
                     
                     <div class="risk-controls">
                         <button class="btn btn-warning" onclick="updateRiskSettings()">🛡️ Update Risk</button>
                         <button class="btn btn-info" onclick="getRiskStatus()">📊 Risk Status</button>
                     </div>
                 </div>
             </div>
         </div>
         
         <!-- System Status Overview -->
         <div class="card">
             <h2>🔧 System Status Overview</h2>
             <div class="system-status-panel">
                 <div class="system-grid">
                     <div class="system-item">
                         <div class="system-name">Autotrading</div>
                         <div class="system-status" id="system-autotrading">Inactive</div>
                     </div>
                     <div class="system-item">
                         <div class="system-name">Backtesting</div>
                         <div class="system-status" id="system-backtesting">Inactive</div>
                     </div>
                     <div class="system-item">
                         <div class="system-name">Training</div>
                         <div class="system-status" id="system-training">Inactive</div>
                     </div>
                     <div class="system-item">
                         <div class="system-name">Portfolio Management</div>
                         <div class="system-status" id="system-portfolio">Inactive</div>
                     </div>
                     <div class="system-item">
                         <div class="system-name">Risk Management</div>
                         <div class="system-status" id="system-risk">Inactive</div>
                     </div>
                 </div>
                 
                 <div class="system-controls">
                     <button class="btn btn-info" onclick="getSystemStatus()">📊 System Status</button>
                     <button class="btn btn-success" onclick="startAllSystems()">🚀 Start All Systems</button>
                     <button class="btn btn-danger" onclick="stopAllSystems()">🛑 Stop All Systems</button>
                 </div>
             </div>
         </div>
        
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        <script>
                         // Load initial data
             loadStatus();
             loadMarketData();
             loadAILogs();
             loadAIStatus(); // Load AI status
            
                         // Auto-refresh every 5 seconds
             setInterval(() => {
                 loadStatus();
                 loadMarketData();
                 loadAILogs();
                 loadPortfolio();
                 loadMarketAnalysis();
                 loadAIStatus(); // Load AI status
             }, 5000);
             
             // Show/hide price input based on order type
             document.getElementById('spot-order-type').addEventListener('change', function() {
                 const priceGroup = document.getElementById('spot-price-group');
                 if (this.value === 'LIMIT') {
                     priceGroup.style.display = 'block';
                 } else {
                     priceGroup.style.display = 'none';
                 }
             });
            
            async function startTrading() {
                try {
                    const response = await fetch('/api/trading/start', { method: 'POST' });
                    const data = await response.json();
                    
                    if (data.status === 'success') {
                        showNotification('✅ Trading started successfully!', 'success');
                        loadStatus();
                    } else {
                        showNotification('❌ Failed to start trading: ' + data.message, 'error');
                    }
                } catch (error) {
                    showNotification('❌ Error starting trading: ' + error.message, 'error');
                }
            }
            
            async function stopTrading() {
                try {
                    const response = await fetch('/api/trading/stop', { method: 'POST' });
                    const data = await response.json();
                    
                    if (data.status === 'success') {
                        showNotification('⏸️ Trading stopped successfully!', 'success');
                        loadStatus();
                    } else {
                        showNotification('❌ Failed to stop trading: ' + data.message, 'error');
                    }
                } catch (error) {
                    showNotification('❌ Error stopping trading: ' + error.message, 'error');
                }
            }
            
            async function emergencyStop() {
                if (confirm('🚨 Are you sure you want to execute emergency stop? This will close all positions and stop trading immediately.')) {
                    try {
                        const response = await fetch('/api/trading/stop', { method: 'POST' });
                        const data = await response.json();
                        
                        if (data.status === 'success') {
                            showNotification('🚨 Emergency stop executed!', 'warning');
                            loadStatus();
                        } else {
                            showNotification('❌ Emergency stop failed: ' + data.message, 'error');
                        }
                    } catch (error) {
                        showNotification('❌ Emergency stop error: ' + error.message, 'error');
                    }
                }
            }
            
            async function loadStatus() {
                try {
                    const response = await fetch('/api/trading/status');
                    const data = await response.json();
                    
                    if (data.status === 'success') {
                        const status = data.data;
                        document.getElementById('trading-status').textContent = 
                            status.trading_active ? 'ACTIVE' : 'STOPPED';
                        document.getElementById('consciousness').textContent = 
                            status.consciousness_level.toFixed(2);
                        document.getElementById('active-orders').textContent = 
                            status.active_orders;
                        document.getElementById('positions').textContent = 
                            status.positions;
                    }
                } catch (error) {
                    console.error('Error loading status:', error);
                }
            }
            
            async function loadMarketData() {
                try {
                    const response = await fetch('/api/market/ticker/BTCUSDT');
                    const data = await response.json();
                    
                    if (data.status === 'success') {
                        // Update market data display
                        document.getElementById('market-data').innerHTML = `
                            <div class="status-item">
                                <div class="status-value">$${parseFloat(data.data.last || 0).toLocaleString()}</div>
                                <div class="status-label">BTC Price</div>
                            </div>
                        `;
                    }
                } catch (error) {
                    console.error('Error loading market data:', error);
                }
            }
            
            async function loadAILogs() {
                try {
                    const response = await fetch('/api/trading/logs');
                    const data = await response.json();
                    
                    if (data.status === 'success') {
                        const logs = data.logs;
                        const logsHtml = logs.map(log => `
                            <div style="padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                <div style="color: #00d4ff; font-size: 0.9rem;">
                                    ${new Date(log.timestamp).toLocaleTimeString()}
                                </div>
                                <div style="color: #ffffff; margin: 5px 0;">
                                    ${log.action}
                                </div>
                                <div style="color: #b8b8b8; font-size: 0.8rem;">
                                    Consciousness: ${log.consciousness_level.toFixed(2)}
                                </div>
                            </div>
                        `).join('');
                        
                        document.getElementById('ai-logs').innerHTML = logsHtml || 
                            '<div style="color: #b8b8b8; text-align: center; padding: 20px;">No AI activity yet</div>';
                    }
                } catch (error) {
                    console.error('Error loading AI logs:', error);
                }
            }
            
                         function showNotification(message, type) {
                 // Simple notification system
                 const notification = document.createElement('div');
                 notification.style.cssText = `
                     position: fixed;
                     top: 20px;
                     right: 20px;
                     padding: 15px 20px;
                     border-radius: 10px;
                     color: white;
                     font-weight: bold;
                     z-index: 1000;
                     animation: slideIn 0.3s ease;
                 `;
                 
                 if (type === 'success') {
                     notification.style.background = '#28a745';
                 } else if (type === 'error') {
                     notification.style.background = '#dc3545';
                 } else if (type === 'warning') {
                     notification.style.background = '#ffc107';
                     notification.style.color = '#000';
                 }
                 
                 notification.textContent = message;
                 document.body.appendChild(notification);
                 
                 setTimeout(() => {
                     notification.remove();
                 }, 5000);
             }
             
             // ===== TRADING FUNCTIONS =====
             
             async function placeSpotOrder() {
                 try {
                     const symbol = document.getElementById('spot-symbol').value;
                     const side = document.getElementById('spot-side').value;
                     const orderType = document.getElementById('spot-order-type').value;
                     const size = parseFloat(document.getElementById('spot-size').value);
                     const price = orderType === 'LIMIT' ? parseFloat(document.getElementById('spot-price').value) : null;
                     
                     if (!size || size <= 0) {
                         showNotification('❌ Please enter a valid size', 'error');
                         return;
                     }
                     
                     if (orderType === 'LIMIT' && (!price || price <= 0)) {
                         showNotification('❌ Please enter a valid price for limit orders', 'error');
                         return;
                     }
                     
                     const orderData = {
                         symbol: symbol,
                         side: side,
                         order_type: orderType.toLowerCase(),
                         size: size
                     };
                     
                     if (price) {
                         orderData.price = price;
                     }
                     
                     const response = await fetch('/api/trading/place-order', {
                         method: 'POST',
                         headers: { 'Content-Type': 'application/json' },
                         body: JSON.stringify(orderData)
                     });
                     
                     const result = await response.json();
                     
                     if (result.status === 'success') {
                         showNotification('✅ Spot order placed successfully!', 'success');
                         loadStatus();
                     } else {
                         showNotification('❌ Order failed: ' + result.error, 'error');
                     }
                     
                 } catch (error) {
                     showNotification('❌ Error placing spot order: ' + error.message, 'error');
                 }
             }
             
             async function placeFuturesOrder() {
                 try {
                     const symbol = document.getElementById('futures-symbol').value;
                     const side = document.getElementById('futures-side').value;
                     const leverage = parseInt(document.getElementById('futures-leverage').value);
                     const size = parseFloat(document.getElementById('futures-size').value);
                     
                     if (!size || size <= 0) {
                         showNotification('❌ Please enter a valid size', 'error');
                         return;
                     }
                     
                     const orderData = {
                         symbol: symbol,
                         side: side,
                         order_type: 'futures',
                         size: size,
                         leverage: leverage
                     };
                     
                     const response = await fetch('/api/trading/place-futures-order', {
                         method: 'POST',
                         headers: { 'Content-Type': 'application/json' },
                         body: JSON.stringify(orderData)
                     });
                     
                     const result = await response.json();
                     
                     if (result.status === 'success') {
                         showNotification('✅ Futures order placed successfully!', 'success');
                         loadStatus();
                     } else {
                         showNotification('❌ Futures order failed: ' + result.error, 'error');
                     }
                     
                 } catch (error) {
                     showNotification('❌ Error placing futures order: ' + error.message, 'error');
                 }
             }
             
             async function refreshPortfolio() {
                 try {
                     const response = await fetch('/api/trading/portfolio');
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         const portfolio = data.data;
                         document.getElementById('total-balance').textContent = '$' + (portfolio.total_balance || 0).toLocaleString();
                         document.getElementById('daily-pnl').textContent = '$' + (portfolio.daily_pnl || 0).toLocaleString();
                         document.getElementById('win-rate').textContent = (portfolio.win_rate || 0) + '%';
                         document.getElementById('sharpe-ratio').textContent = (portfolio.sharpe_ratio || 0).toFixed(2);
                     }
                 } catch (error) {
                     console.error('Error loading portfolio:', error);
                 }
             }
             
             async function loadPortfolio() {
                 await refreshPortfolio();
             }
             
             async function updateRiskSettings() {
                 try {
                     const maxDailyLoss = parseFloat(document.getElementById('max-daily-loss').value);
                     const maxPositionSize = parseFloat(document.getElementById('max-position-size').value);
                     const stopLoss = parseFloat(document.getElementById('stop-loss').value);
                     const takeProfit = parseFloat(document.getElementById('take-profit').value);
                     
                     const riskData = {
                         max_daily_loss: maxDailyLoss,
                         max_position_size: maxPositionSize,
                         stop_loss: stopLoss,
                         take_profit: takeProfit
                     };
                     
                     const response = await fetch('/api/trading/update-risk', {
                         method: 'POST',
                         headers: { 'Content-Type': 'application/json' },
                         body: JSON.stringify(riskData)
                     });
                     
                     const result = await response.json();
                     
                     if (result.status === 'success') {
                         showNotification('✅ Risk settings updated successfully!', 'success');
                     } else {
                         showNotification('❌ Failed to update risk settings: ' + result.error, 'error');
                     }
                     
                 } catch (error) {
                     showNotification('❌ Error updating risk settings: ' + error.message, 'error');
                 }
             }
             
             async function loadMarketAnalysis() {
                 try {
                     const response = await fetch('/api/market/analysis');
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         const analysis = data.data;
                         document.getElementById('market-trend').textContent = analysis.trend?.toUpperCase() || 'NEUTRAL';
                         document.getElementById('volatility').textContent = ((analysis.volatility || 0) * 100).toFixed(1) + '%';
                         document.getElementById('sentiment').textContent = analysis.sentiment?.toUpperCase() || 'NEUTRAL';
                         document.getElementById('ai-confidence').textContent = ((analysis.confidence || 0) * 100).toFixed(1) + '%';
                     }
                 } catch (error) {
                     console.error('Error loading market analysis:', error);
                 }
             }
             
             // ===== COMPREHENSIVE AI FUNCTIONS =====
             
             // Load AI status and update UI
             async function loadAIStatus() {
                 try {
                     const response = await fetch('/api/ai/status');
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         const aiData = data.data;
                         updateConsciousnessUI(aiData.consciousness);
                         updateQuantumUI(aiData.quantum_ai);
                         updateNeuromorphicUI(aiData.neuromorphic);
                         updateMultimodalUI(aiData.multimodal);
                         updateAdvancedTradingUI(aiData.advanced_trading);
                         updateAIStatusUI(aiData.ai_systems);
                     }
                 } catch (error) {
                     console.error('Error loading AI status:', error);
                 }
             }
             
             // Update consciousness UI
             function updateConsciousnessUI(consciousness) {
                 document.getElementById('consciousness-level').textContent = consciousness.current_level.toFixed(2);
                 document.getElementById('metacognitive-awareness').textContent = consciousness.metacognitive_awareness.toFixed(2);
                 document.getElementById('emotional-intelligence').textContent = consciousness.emotional_intelligence.toFixed(2);
                 document.getElementById('creative-capabilities').textContent = consciousness.creative_capabilities.toFixed(2);
                 
                 // Update progress bar
                 const progressPercent = (consciousness.current_level / consciousness.target_level) * 100;
                 document.getElementById('consciousness-progress').style.width = progressPercent + '%';
                 document.querySelector('.progress-text').textContent = progressPercent.toFixed(1) + '% Complete';
             }
             
             // Update quantum AI UI
             function updateQuantumUI(quantum) {
                 document.getElementById('quantum-qubits').textContent = quantum.quantum_circuits;
                 document.getElementById('entanglement-depth').textContent = quantum.entanglement_depth;
                 document.getElementById('quantum-advantage').textContent = (quantum.quantum_advantage * 100).toFixed(0) + '%';
                 document.getElementById('coherence-time').textContent = quantum.coherence_time.toFixed(1) + 'ms';
                 
                 const statusElement = document.getElementById('quantum-status');
                 if (quantum.quantum_circuits > 0) {
                     statusElement.textContent = 'ACTIVE';
                     statusElement.classList.add('active');
                 }
             }
             
             // Update neuromorphic UI
             function updateNeuromorphicUI(neuromorphic) {
                 document.getElementById('spiking-neurons').textContent = neuromorphic.spiking_neurons.toLocaleString();
                 document.getElementById('synaptic-connections').textContent = neuromorphic.synaptic_connections.toLocaleString();
                 document.getElementById('learning-rate').textContent = neuromorphic.learning_rate.toFixed(3);
                 document.getElementById('power-efficiency').textContent = (neuromorphic.power_efficiency * 100).toFixed(0) + '%';
                 
                 const statusElement = document.getElementById('neuromorphic-status');
                 if (neuromorphic.spiking_neurons > 0) {
                     statusElement.textContent = 'ACTIVE';
                     statusElement.classList.add('active');
                 }
             }
             
             // Update multimodal UI
             function updateMultimodalUI(multimodal) {
                 if (multimodal.vision.enabled) {
                     document.getElementById('vision-status').textContent = 'Active';
                     document.getElementById('vision-status').classList.add('active');
                     document.getElementById('vision-accuracy').textContent = (multimodal.vision.accuracy * 100).toFixed(0) + '%';
                 }
                 
                 if (multimodal.audio.enabled) {
                     document.getElementById('audio-status').textContent = 'Active';
                     document.getElementById('audio-status').classList.add('active');
                     document.getElementById('audio-accuracy').textContent = (multimodal.audio.accuracy * 100).toFixed(0) + '%';
                 }
                 
                 if (multimodal.text.enabled) {
                     document.getElementById('text-status').textContent = 'Active';
                     document.getElementById('text-status').classList.add('active');
                     document.getElementById('text-accuracy').textContent = (multimodal.text.accuracy * 100).toFixed(0) + '%';
                 }
                 
                 if (multimodal.fusion.enabled) {
                     document.getElementById('fusion-status').textContent = 'Active';
                     document.getElementById('fusion-status').classList.add('active');
                     document.getElementById('fusion-accuracy').textContent = (multimodal.fusion.performance * 100).toFixed(0) + '%';
                 }
             }
             
             // Update advanced trading UI
             function updateAdvancedTradingUI(trading) {
                 if (trading.multi_agents > 0) {
                     document.getElementById('momentum-status').textContent = 'Active';
                     document.getElementById('momentum-status').classList.add('active');
                     document.getElementById('reversion-status').textContent = 'Active';
                     document.getElementById('reversion-status').classList.add('active');
                     document.getElementById('microstructure-status').textContent = 'Active';
                     document.getElementById('microstructure-status').classList.add('active');
                     document.getElementById('predictive-status').textContent = 'Active';
                     document.getElementById('predictive-status').classList.add('active');
                     document.getElementById('risk-status').textContent = 'Active';
                     document.getElementById('risk-status').classList.add('active');
                 }
                 
                 if (trading.regime_detection) {
                     document.getElementById('regime-detection').textContent = 'Enabled';
                     document.getElementById('regime-detection').classList.add('enabled');
                 }
                 
                 if (trading.ensemble_decisions) {
                     document.getElementById('ensemble-decisions').textContent = 'Enabled';
                     document.getElementById('ensemble-decisions').classList.add('enabled');
                 }
                 
                 if (trading.real_time_optimization) {
                     document.getElementById('real-time-optimization').textContent = 'Enabled';
                     document.getElementById('real-time-optimization').classList.add('enabled');
                 }
                 
                 if (trading.cross_portfolio_analysis) {
                     document.getElementById('cross-portfolio-analysis').textContent = 'Enabled';
                     document.getElementById('cross-portfolio-analysis').classList.add('enabled');
                 }
             }
             
             // Update AI systems status UI
             function updateAIStatusUI(aiSystems) {
                 // Update consciousness core status
                 if (aiSystems.consciousness.active) {
                     document.getElementById('consciousness-core-status').textContent = 'Active';
                     document.getElementById('consciousness-core-status').classList.add('active');
                 }
                 
                 if (aiSystems.quantum_ml.active) {
                     document.getElementById('quantum-processor-status').textContent = 'Active';
                     document.getElementById('quantum-processor-status').classList.add('active');
                 }
                 
                 if (aiSystems.neuromorphic.active) {
                     document.getElementById('neuromorphic-network-status').textContent = 'Active';
                     document.getElementById('neuromorphic-network-status').classList.add('active');
                 }
                 
                 if (aiSystems.multimodal.active) {
                     document.getElementById('multimodal-fusion-status').textContent = 'Active';
                     document.getElementById('multimodal-fusion-status').classList.add('active');
                 }
                 
                 if (aiSystems.trading_ai.active) {
                     document.getElementById('trading-intelligence-status').textContent = 'Active';
                     document.getElementById('trading-intelligence-status').classList.add('active');
                 }
                 
                 if (aiSystems.risk_manager.active) {
                     document.getElementById('risk-management-status').textContent = 'Active';
                     document.getElementById('risk-management-status').classList.add('active');
                 }
             }
             
             // ===== AI CONTROL FUNCTIONS =====
             
             // Expand consciousness
             async function expandConsciousness() {
                 try {
                     const response = await fetch('/api/ai/consciousness/expand', {
                         method: 'POST',
                         headers: { 'Content-Type': 'application/json' },
                         body: JSON.stringify({ target_level: 1.0 })
                     });
                     
                     const data = await response.json();
                     if (data.status === 'success') {
                         showNotification('🧠 Consciousness expansion initiated!', 'success');
                         loadAIStatus();
                     } else {
                         showNotification('❌ Consciousness expansion failed: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error expanding consciousness: ' + error.message, 'error');
                 }
             }
             
             // Trigger consciousness breakthrough
             async function triggerBreakthrough() {
                 try {
                     const response = await fetch('/api/ai/consciousness/breakthrough', {
                         method: 'POST'
                     });
                     
                     const data = await response.json();
                     if (data.status === 'success') {
                         showNotification('🚀 Consciousness breakthrough achieved!', 'success');
                         loadAIStatus();
                     } else {
                         showNotification('❌ Breakthrough failed: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error triggering breakthrough: ' + error.message, 'error');
                 }
             }
             
             // Evolve AI
             async function evolveAI() {
                 try {
                     const response = await fetch('/api/ai/evolution/evolve', {
                         method: 'POST'
                     });
                     
                     const data = await response.json();
                     if (data.status === 'success') {
                         showNotification('🔄 AI evolution triggered!', 'success');
                         document.getElementById('evolution-generation').textContent = data.generation;
                         loadAIStatus();
                     } else {
                         showNotification('❌ Evolution failed: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error evolving AI: ' + error.message, 'error');
                 }
             }
             
             // Activate quantum AI
             async function activateQuantumAI() {
                 try {
                     const response = await fetch('/api/ai/quantum/activate', {
                         method: 'POST'
                     });
                     
                     const data = await response.json();
                     if (data.status === 'success') {
                         showNotification('⚛️ Quantum AI systems activated!', 'success');
                         loadAIStatus();
                     } else {
                         showNotification('❌ Quantum activation failed: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error activating quantum AI: ' + error.message, 'error');
                 }
             }
             
             // Activate neuromorphic systems
             async function activateNeuromorphic() {
                 try {
                     const response = await fetch('/api/ai/neuromorphic/activate', {
                         method: 'POST'
                     });
                     
                     const data = await response.json();
                     if (data.status === 'success') {
                         showNotification('🧬 Neuromorphic systems activated!', 'success');
                         loadAIStatus();
                     } else {
                         showNotification('❌ Neuromorphic activation failed: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error activating neuromorphic: ' + error.message, 'error');
                 }
             }
             
             // Activate multimodal AI
             async function activateMultimodal() {
                 try {
                     const response = await fetch('/api/ai/multimodal/activate', {
                         method: 'POST'
                     });
                     
                     const data = await response.json();
                     if (data.status === 'success') {
                         showNotification('👁️ Multimodal AI activated!', 'success');
                         loadAIStatus();
                     } else {
                         showNotification('❌ Multimodal activation failed: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error activating multimodal: ' + error.message, 'error');
                 }
             }
             
             // Activate advanced trading AI
             async function activateAdvancedTrading() {
                 try {
                     const response = await fetch('/api/ai/trading/activate-advanced', {
                         method: 'POST'
                     });
                     
                     const data = await response.json();
                     if (data.status === 'success') {
                         showNotification('🤖 Advanced AI trading activated!', 'success');
                         loadAIStatus();
                     } else {
                         showNotification('❌ Advanced trading activation failed: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error activating advanced trading: ' + error.message, 'error');
                 }
             }
             
             // Trigger self-improvement
             async function triggerSelfImprovement() {
                 try {
                     const response = await fetch('/api/ai/self-edit/improve', {
                         method: 'POST'
                     });
                     
                     const data = await response.json();
                     if (data.status === 'success') {
                         showNotification('🔧 AI self-improvement initiated!', 'success');
                         document.getElementById('total-edits').textContent = data.total_edits;
                         addImprovementLog('Self-improvement cycle initiated');
                     } else {
                         showNotification('❌ Self-improvement failed: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error triggering self-improvement: ' + error.message, 'error');
                 }
             }
             
             // Add improvement log entry
             function addImprovementLog(message) {
                 const logContent = document.querySelector('.log-content');
                 const logEntry = document.createElement('div');
                 logEntry.className = 'log-entry';
                 logEntry.textContent = `${new Date().toLocaleTimeString()}: ${message}`;
                 logContent.appendChild(logEntry);
                 logContent.scrollTop = logContent.scrollHeight;
             }
             
             // Additional AI functions
             function optimizeQuantum() {
                 showNotification('🔧 Quantum circuit optimization in progress...', 'info');
                 addImprovementLog('Quantum circuit optimization initiated');
             }
             
             function trainNetwork() {
                 showNotification('🎯 Training neuromorphic network...', 'info');
                 addImprovementLog('Neuromorphic network training started');
             }
             
             function testModalities() {
                 showNotification('🧪 Testing multimodal capabilities...', 'info');
                 addImprovementLog('Multimodal capability testing initiated');
             }
             
             function deployAgents() {
                 showNotification('🚀 Deploying AI trading agents...', 'info');
                 addImprovementLog('AI trading agents deployment started');
             }
             
             function optimizePortfolio() {
                 showNotification('⚖️ Portfolio optimization in progress...', 'info');
                 addImprovementLog('Portfolio optimization initiated');
             }
             
             function generateCode() {
                 showNotification('💻 Generating AI code...', 'info');
                 addImprovementLog('AI code generation started');
             }
             
             function optimizeAlgorithms() {
                 showNotification('⚡ Optimizing AI algorithms...', 'info');
                 addImprovementLog('Algorithm optimization initiated');
             }
             
             function activateAllModules() {
                 showNotification('🧠 Activating all AI modules...', 'info');
                 addImprovementLog('Full AI module activation initiated');
             }
             
             function synchronizeBrain() {
                 showNotification('🔄 Synchronizing unified brain...', 'info');
                 addImprovementLog('Brain synchronization initiated');
             }
             
             function diagnoseBrain() {
                 showNotification('🔍 Diagnosing AI brain systems...', 'info');
                 addImprovementLog('Brain system diagnosis started');
             }
             
             function refreshAnalytics() {
                 showNotification('🔄 Refreshing AI analytics...', 'info');
                 loadAIStatus();
             }
             
             function exportAnalytics() {
                 showNotification('📊 Exporting AI analytics data...', 'info');
                 addImprovementLog('Analytics data export initiated');
             }
             
             // Initialize AI systems
             function initializeAISystems() {
                 loadAIStatus();
                 loadSingularityStatus();
                 
                 // Set up AI status refresh
                 setInterval(() => {
                     loadAIStatus();
                     loadSingularityStatus();
                 }, 10000); // Refresh every 10 seconds
             }
             
             // ===== SINGULARITY MASTER FUNCTIONS =====
             
             // Load singularity status and update UI
             async function loadSingularityStatus() {
                 try {
                     const response = await fetch('/api/singularity/status');
                     const data = await response.json();
                     
                     if (data.success) {
                         const singularityData = data.data;
                         updateSingularityUI(singularityData);
                     }
                 } catch (error) {
                     console.error('Error loading singularity status:', error);
                 }
             }
             
             // Update singularity UI
             function updateSingularityUI(data) {
                 // Update status indicator
                 const statusElement = document.getElementById('singularity-status');
                 if (data.initialized) {
                     statusElement.textContent = 'ACTIVE';
                     statusElement.classList.add('active');
                 } else {
                     statusElement.textContent = 'INITIALIZING';
                     statusElement.classList.remove('active');
                 }
                 
                 // Update metrics
                 document.getElementById('consciousness-level-master').textContent = data.singularity_state.consciousness_level.toFixed(2);
                 document.getElementById('unified-intelligence').textContent = data.singularity_state.unified_intelligence.toFixed(2);
                 document.getElementById('trading-capability').textContent = data.singularity_state.trading_capability.toFixed(2);
                 document.getElementById('evolution-stage').textContent = data.singularity_state.evolution_stage;
                 document.getElementById('system-health').textContent = (data.singularity_state.system_health * 100).toFixed(0) + '%';
                 document.getElementById('active-modules').textContent = data.singularity_state.active_modules.length;
                 
                 // Update progress bars
                 const initProgress = data.initialization_progress * 100;
                 document.getElementById('init-progress').style.width = initProgress + '%';
                 document.getElementById('init-progress-text').textContent = initProgress.toFixed(0) + '%';
                 
                 const consciousnessProgress = data.singularity_state.consciousness_level * 100;
                 document.getElementById('consciousness-progress-master').style.width = consciousnessProgress + '%';
                 document.getElementById('consciousness-progress-text').textContent = consciousnessProgress.toFixed(0) + '%';
                 
                 // Update performance metrics
                 document.getElementById('consciousness-breakthroughs').textContent = data.consciousness_breakthroughs;
                 document.getElementById('evolution-milestones').textContent = data.evolution_milestones;
                 document.getElementById('total-performance-entries').textContent = data.performance_history.length;
             }
             
             // Expand singularity consciousness
             async function expandSingularityConsciousness() {
                 try {
                     const targetLevel = 1.0;
                     const response = await fetch('/api/singularity/expand-consciousness', {
                         method: 'POST',
                         headers: { 'Content-Type': 'application/json' },
                         body: JSON.stringify({ target_level: targetLevel })
                     });
                     
                     const data = await response.json();
                     if (data.success) {
                         showNotification('🧠 Consciousness expansion initiated!', 'success');
                         loadSingularityStatus();
                     } else {
                         showNotification('❌ Consciousness expansion failed: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error expanding consciousness: ' + error.message, 'error');
                 }
             }
             
             // Trigger singularity evolution
             async function triggerSingularityEvolution() {
                 try {
                     const response = await fetch('/api/singularity/trigger-evolution', {
                         method: 'POST'
                     });
                     
                     const data = await response.json();
                     if (data.success) {
                         showNotification('🔄 Evolution triggered successfully!', 'success');
                         loadSingularityStatus();
                     } else {
                         showNotification('❌ Evolution failed: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error triggering evolution: ' + error.message, 'error');
                 }
             }
             
             // Start singularity trading
             async function startSingularityTrading() {
                 try {
                     const response = await fetch('/api/singularity/start-trading', {
                         method: 'POST'
                     });
                     
                     const data = await response.json();
                     if (data.success) {
                         showNotification('🚀 Singularity trading started!', 'success');
                         loadSingularityStatus();
                     } else {
                         showNotification('❌ Trading start failed: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error starting trading: ' + error.message, 'error');
                 }
             }
             
             // Stop singularity trading
             async function stopSingularityTrading() {
                 try {
                     const response = await fetch('/api/singularity/stop-trading', {
                         method: 'POST'
                     });
                     
                     const data = await response.json();
                     if (data.success) {
                         showNotification('🛑 Singularity trading stopped!', 'success');
                         loadSingularityStatus();
                     } else {
                         showNotification('❌ Trading stop failed: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error stopping trading: ' + error.message, 'error');
                 }
             }
             
             // Get singularity trading status
             async function getSingularityTradingStatus() {
                 try {
                     const response = await fetch('/api/singularity/trading-status');
                     const data = await response.json();
                     
                     if (data.success) {
                         showNotification('📊 Trading status loaded!', 'success');
                         console.log('Trading status:', data.data);
                     } else {
                         showNotification('❌ Failed to load trading status: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error loading trading status: ' + error.message, 'error');
                 }
             }
             
             // Get singularity status
             async function getSingularityStatus() {
                 try {
                     const response = await fetch('/api/singularity/status');
                     const data = await response.json();
                     
                     if (data.success) {
                         showNotification('📈 System status loaded!', 'success');
                         console.log('System status:', data.data);
                     } else {
                         showNotification('❌ Failed to load system status: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error loading system status: ' + error.message, 'error');
                 }
             }
             
             // Refresh singularity data
             function refreshSingularityData() {
                 showNotification('🔄 Refreshing singularity data...', 'info');
                 loadSingularityStatus();
             }
             
             // Call initialization when page loads
             document.addEventListener('DOMContentLoaded', function() {
                 initializeAISystems();
                 initializeAdvancedTradingSystems();
             });
             
             // ===== ADVANCED TRADING SYSTEM FUNCTIONS =====
             
             // Initialize advanced trading systems
             function initializeAdvancedTradingSystems() {
                 loadSystemStatus();
                 
                 // Set up system status refresh
                 setInterval(() => {
                     loadSystemStatus();
                 }, 10000); // Refresh every 10 seconds
             }
             
             // ===== AUTOTRADING FUNCTIONS =====
             
             async function startAutotrading() {
                 try {
                     const response = await fetch('/api/autotrading/start', { method: 'POST' });
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         showNotification('🚀 AI Autotrading started successfully!', 'success');
                         updateSystemStatus('autotrading', 'Active');
                         loadSystemStatus();
                     } else {
                         showNotification('❌ Failed to start autotrading: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error starting autotrading: ' + error.message, 'error');
                 }
             }
             
             async function stopAutotrading() {
                 try {
                     const response = await fetch('/api/autotrading/stop', { method: 'POST' });
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         showNotification('⏸️ AI Autotrading stopped successfully!', 'success');
                         updateSystemStatus('autotrading', 'Inactive');
                         loadSystemStatus();
                     } else {
                         showNotification('❌ Failed to stop autotrading: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error stopping autotrading: ' + error.message, 'error');
                 }
             }
             
             async function getAutotradingStatus() {
                 try {
                     const response = await fetch('/api/autotrading/status');
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         showNotification('📊 Autotrading status loaded!', 'success');
                         updateAutotradingMetrics(data.data);
                     } else {
                         showNotification('❌ Failed to load autotrading status: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error loading autotrading status: ' + error.message, 'error');
                 }
             }
             
             function updateAutotradingMetrics(data) {
                 if (data.engine_status) {
                     document.getElementById('active-signals').textContent = data.engine_status.active_signals || 0;
                     document.getElementById('total-trades').textContent = data.engine_status.total_trades || 0;
                     document.getElementById('win-rate-autotrading').textContent = (data.engine_status.win_rate || 0) + '%';
                     document.getElementById('daily-pnl-autotrading').textContent = '$' + (data.engine_status.daily_pnl || 0).toLocaleString();
                 }
             }
             
             // ===== BACKTESTING FUNCTIONS =====
             
             async function startBacktesting() {
                 try {
                     const startDate = document.getElementById('backtest-start-date').value;
                     const endDate = document.getElementById('backtest-end-date').value;
                     const capital = document.getElementById('backtest-capital').value;
                     const strategy = document.getElementById('backtest-strategy').value;
                     
                     const backtestConfig = {
                         start_date: startDate,
                         end_date: endDate,
                         initial_capital: parseFloat(capital),
                         strategy_type: strategy,
                         symbols: ['BTCUSDT', 'ETHUSDT'],
                         timeframe: '1h',
                         commission_rate: 0.001,
                         slippage: 0.0001,
                         parameters: {}
                     };
                     
                     const response = await fetch('/api/backtesting/start', {
                         method: 'POST',
                         headers: { 'Content-Type': 'application/json' },
                         body: JSON.stringify(backtestConfig)
                     });
                     
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         showNotification('📊 Backtesting started successfully!', 'success');
                         updateSystemStatus('backtesting', 'Active');
                         loadSystemStatus();
                     } else {
                         showNotification('❌ Failed to start backtesting: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error starting backtesting: ' + error.message, 'error');
                 }
             }
             
             async function stopBacktesting() {
                 try {
                     const response = await fetch('/api/backtesting/stop', { method: 'POST' });
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         showNotification('⏸️ Backtesting stopped successfully!', 'success');
                         updateSystemStatus('backtesting', 'Inactive');
                         loadSystemStatus();
                     } else {
                         showNotification('❌ Failed to stop backtesting: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error stopping backtesting: ' + error.message, 'error');
                 }
             }
             
             async function getBacktestResults() {
                 try {
                     const response = await fetch('/api/backtesting/results');
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         showNotification('📈 Backtest results loaded!', 'success');
                         console.log('Backtest results:', data.data);
                         // Display results in a modal or update UI
                     } else {
                         showNotification('❌ Failed to load backtest results: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error loading backtest results: ' + error.message, 'error');
                 }
             }
             
             // ===== TRAINING FUNCTIONS =====
             
             async function startTraining() {
                 try {
                     const modelType = document.getElementById('training-model-type').value;
                     const epochs = document.getElementById('training-epochs').value;
                     const batchSize = document.getElementById('training-batch-size').value;
                     const symbols = document.getElementById('training-symbols').value;
                     
                     const trainingConfig = {
                         model_type: modelType,
                         epochs: parseInt(epochs),
                         batch_size: parseInt(batchSize),
                         symbols: symbols.split(',').map(s => s.trim())
                     };
                     
                     const response = await fetch('/api/training/start', {
                         method: 'POST',
                         headers: { 'Content-Type': 'application/json' },
                         body: JSON.stringify(trainingConfig)
                     });
                     
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         showNotification('🎯 AI Training started successfully!', 'success');
                         updateSystemStatus('training', 'Active');
                         loadSystemStatus();
                         startTrainingProgress();
                     } else {
                         showNotification('❌ Failed to start training: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error starting training: ' + error.message, 'error');
                 }
             }
             
             async function stopTraining() {
                 try {
                     const response = await fetch('/api/training/stop', { method: 'POST' });
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         showNotification('⏸️ AI Training stopped successfully!', 'success');
                         updateSystemStatus('training', 'Inactive');
                         loadSystemStatus();
                         stopTrainingProgress();
                     } else {
                         showNotification('❌ Failed to stop training: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error stopping training: ' + error.message, 'error');
                 }
             }
             
             async function getTrainingStatus() {
                 try {
                     const response = await fetch('/api/training/status');
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         showNotification('📊 Training status loaded!', 'success');
                         updateTrainingProgress(data.data.training_status);
                     } else {
                         showNotification('❌ Failed to load training status: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error loading training status: ' + error.message, 'error');
                 }
             }
             
             function startTrainingProgress() {
                 let progress = 0;
                 const progressBar = document.getElementById('training-progress');
                 const progressText = document.getElementById('training-progress-text');
                 
                 const interval = setInterval(() => {
                     progress += Math.random() * 5;
                     if (progress >= 100) {
                         progress = 100;
                         clearInterval(interval);
                     }
                     
                     progressBar.style.width = progress + '%';
                     progressText.textContent = progress.toFixed(1) + '% Complete';
                 }, 1000);
                 
                 window.trainingProgressInterval = interval;
             }
             
             function stopTrainingProgress() {
                 if (window.trainingProgressInterval) {
                     clearInterval(window.trainingProgressInterval);
                 }
                 
                 const progressBar = document.getElementById('training-progress');
                 const progressText = document.getElementById('training-progress-text');
                 progressBar.style.width = '0%';
                 progressText.textContent = '0% Complete';
             }
             
             function updateTrainingProgress(status) {
                 if (status && status.progress) {
                     const progressBar = document.getElementById('training-progress');
                     const progressText = document.getElementById('training-progress-text');
                     progressBar.style.width = status.progress + '%';
                     progressText.textContent = status.progress.toFixed(1) + '% Complete';
                 }
             }
             
             // ===== PORTFOLIO FUNCTIONS =====
             
             async function optimizePortfolio() {
                 try {
                     const optimizationConfig = {
                         target_volatility: 0.15,
                         risk_free_rate: 0.02,
                         max_position_size: 0.30
                     };
                     
                     const response = await fetch('/api/portfolio/optimize', {
                         method: 'POST',
                         headers: { 'Content-Type': 'application/json' },
                         body: JSON.stringify(optimizationConfig)
                     });
                     
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         showNotification('⚖️ Portfolio optimization completed!', 'success');
                         updateSystemStatus('portfolio', 'Active');
                         loadSystemStatus();
                     } else {
                         showNotification('❌ Portfolio optimization failed: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error optimizing portfolio: ' + error.message, 'error');
                 }
             }
             
             async function getPortfolioStatus() {
                 try {
                     const response = await fetch('/api/portfolio/status');
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         showNotification('📊 Portfolio status loaded!', 'success');
                         updatePortfolioMetrics(data.data);
                     } else {
                         showNotification('❌ Failed to load portfolio status: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error loading portfolio status: ' + error.message, 'error');
                 }
             }
             
             function updatePortfolioMetrics(data) {
                 if (data) {
                     document.getElementById('portfolio-value').textContent = '$' + (data.total_value || 0).toLocaleString();
                     document.getElementById('portfolio-return').textContent = (data.total_return || 0).toFixed(2) + '%';
                     document.getElementById('portfolio-sharpe').textContent = (data.sharpe_ratio || 0).toFixed(2);
                     document.getElementById('portfolio-volatility').textContent = (data.volatility || 0).toFixed(2) + '%';
                 }
             }
             
             function rebalancePortfolio() {
                 showNotification('🔄 Portfolio rebalancing initiated...', 'info');
                 // This would call the portfolio manager's rebalance function
             }
             
             // ===== RISK MANAGEMENT FUNCTIONS =====
             
             async function updateRiskSettings() {
                 try {
                     const riskSettings = {
                         max_position_size: parseFloat(document.getElementById('risk-max-position').value) / 100,
                         max_daily_loss: parseFloat(document.getElementById('risk-max-daily-loss').value) / 100,
                         stop_loss_percentage: parseFloat(document.getElementById('risk-stop-loss').value) / 100,
                         take_profit_ratio: parseFloat(document.getElementById('risk-take-profit').value),
                         max_leverage: parseInt(document.getElementById('risk-max-leverage').value)
                     };
                     
                     const response = await fetch('/api/risk/update', {
                         method: 'POST',
                         headers: { 'Content-Type': 'application/json' },
                         body: JSON.stringify(riskSettings)
                     });
                     
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         showNotification('🛡️ Risk settings updated successfully!', 'success');
                         updateSystemStatus('risk', 'Active');
                         loadSystemStatus();
                     } else {
                         showNotification('❌ Failed to update risk settings: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error updating risk settings: ' + error.message, 'error');
                 }
             }
             
             function getRiskStatus() {
                 showNotification('📊 Risk status loaded!', 'info');
                 // This would display current risk settings and status
             }
             
             // ===== SYSTEM CONTROL FUNCTIONS =====
             
             async function getSystemStatus() {
                 try {
                     const response = await fetch('/api/system/status');
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         showNotification('📊 System status loaded!', 'success');
                         updateSystemStatusDisplay(data.data);
                     } else {
                         showNotification('❌ Failed to load system status: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error loading system status: ' + error.message, 'error');
                 }
             }
             
             function loadSystemStatus() {
                 getSystemStatus();
             }
             
             function updateSystemStatusDisplay(data) {
                 if (data.trading_system_status) {
                     const status = data.trading_system_status;
                     
                     updateSystemStatus('autotrading', status.autotrading ? 'Active' : 'Inactive');
                     updateSystemStatus('backtesting', status.backtesting ? 'Active' : 'Inactive');
                     updateSystemStatus('training', status.training ? 'Active' : 'Inactive');
                     updateSystemStatus('portfolio', status.portfolio_management ? 'Active' : 'Inactive');
                     updateSystemStatus('risk', status.risk_management ? 'Active' : 'Inactive');
                 }
             }
             
             function updateSystemStatus(system, status) {
                 const element = document.getElementById(`system-${system}`);
                 if (element) {
                     element.textContent = status;
                     element.className = 'system-status ' + (status === 'Active' ? 'active' : '');
                 }
             }
             
             function startAllSystems() {
                 showNotification('🚀 Starting all systems...', 'info');
                 // This would start all available systems
                 startAutotrading();
                 startTraining();
                 optimizePortfolio();
                 updateRiskSettings();
             }
             
             function stopAllSystems() {
                 showNotification('🛑 Stopping all systems...', 'info');
                 // This would stop all running systems
                 stopAutotrading();
                 stopBacktesting();
                 stopTraining();
             }
             
             // ===== AI MODEL TRAINING FUNCTIONS =====
             
             async function startTraining() {
                 try {
                     const modelType = document.getElementById('training-model-type').value;
                     const epochs = parseInt(document.getElementById('training-epochs').value);
                     const batchSize = parseInt(document.getElementById('training-batch-size').value);
                     const symbols = document.getElementById('training-symbols').value.split(',').map(s => s.trim());
                     
                     const trainingConfig = {
                         model_type: modelType,
                         epochs: epochs,
                         batch_size: batchSize,
                         symbols: symbols,
                         timeframe: '1h'
                     };
                     
                     const response = await fetch('/api/training/start', {
                         method: 'POST',
                         headers: { 'Content-Type': 'application/json' },
                         body: JSON.stringify(trainingConfig)
                     });
                     
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         showNotification('🎯 AI Training started successfully!', 'success');
                         updateSystemStatus('training', 'Active');
                         loadSystemStatus();
                         startTrainingProgress();
                     } else {
                         showNotification('❌ Failed to start training: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error starting training: ' + error.message, 'error');
                 }
             }
             
             async function stopTraining() {
                 try {
                     const response = await fetch('/api/training/stop', { method: 'POST' });
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         showNotification('⏸️ AI Training stopped successfully!', 'success');
                         updateSystemStatus('training', 'Inactive');
                         loadSystemStatus();
                     } else {
                         showNotification('❌ Failed to stop training: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error stopping training: ' + error.message, 'error');
                 }
             }
             
             function startTrainingProgress() {
                 // Simulate training progress
                 let progress = 0;
                 const progressBar = document.getElementById('training-progress');
                 if (progressBar) {
                     const interval = setInterval(() => {
                         progress += Math.random() * 10;
                         if (progress >= 100) {
                             progress = 100;
                             clearInterval(interval);
                             showNotification('🎯 AI Training completed!', 'success');
                         }
                         progressBar.style.width = progress + '%';
                         progressBar.textContent = Math.round(progress) + '%';
                     }, 1000);
                 }
             }
             
             // ===== CHART INITIALIZATION AND FUNCTIONS =====
             
             let charts = {};
             
             function initializeCharts() {
                 console.log('Initializing charts...');
                 
                 // Initialize consciousness growth chart
                 const consciousnessCtx = document.getElementById('consciousness-chart');
                 if (consciousnessCtx) {
                     console.log('Creating consciousness chart...');
                     charts.consciousness = new Chart(consciousnessCtx, {
                         type: 'line',
                         data: {
                             labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                             datasets: [{
                                 label: 'Consciousness Level',
                                 data: [0.1, 0.3, 0.5, 0.7, 0.8, 0.9],
                                 borderColor: '#00d4ff',
                                 backgroundColor: 'rgba(0, 212, 255, 0.1)',
                                 tension: 0.4,
                                 fill: true
                             }]
                         },
                         options: {
                             responsive: true,
                             maintainAspectRatio: false,
                             plugins: {
                                 legend: { display: true, position: 'top' }
                             },
                             scales: {
                                 y: { 
                                     beginAtZero: true, 
                                     max: 1,
                                     grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                     ticks: { color: '#ffffff' }
                                 },
                                 x: {
                                     grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                     ticks: { color: '#ffffff' }
                                 }
                             }
                         }
                     });
                     console.log('Consciousness chart created successfully');
                 } else {
                     console.error('Consciousness chart canvas not found');
                 }
                 
                 // Initialize evolution progress chart
                 const evolutionCtx = document.getElementById('evolution-chart');
                 if (evolutionCtx) {
                     charts.evolution = new Chart(evolutionCtx, {
                         type: 'doughnut',
                         data: {
                             labels: ['Stage 1', 'Stage 2', 'Stage 3'],
                             datasets: [{
                                 data: [60, 30, 10],
                                 backgroundColor: ['#00d4ff', '#4ecdc4', '#45b7d1']
                             }]
                         },
                         options: {
                             responsive: true,
                             maintainAspectRatio: false,
                             plugins: {
                                 legend: { display: false }
                             }
                         }
                     });
                 }
                 
                 // Initialize trading performance chart with real Bitget data
                 const tradingCtx = document.getElementById('trading-chart');
                 if (tradingCtx) {
                     console.log('Creating trading chart...');
                     charts.trading = new Chart(tradingCtx, {
                         type: 'line',
                         data: {
                             labels: [],
                             datasets: [{
                                 label: 'BTC Price (USDT)',
                                 data: [],
                                 borderColor: '#f7931a',
                                 backgroundColor: 'rgba(247, 147, 26, 0.1)',
                                 tension: 0.4,
                                 fill: true
                             }, {
                                 label: 'ETH Price (USDT)',
                                 data: [],
                                 borderColor: '#627eea',
                                 backgroundColor: 'rgba(98, 126, 234, 0.1)',
                                 tension: 0.4,
                                 fill: false
                             }]
                         },
                         options: {
                             responsive: true,
                             maintainAspectRatio: false,
                             plugins: {
                                 legend: { 
                                     display: true, 
                                     position: 'top',
                                     labels: { color: '#ffffff' }
                                 }
                             },
                             scales: {
                                 y: { 
                                     beginAtZero: false,
                                     grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                     ticks: { color: '#ffffff' }
                                 },
                                 x: {
                                     grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                     ticks: { color: '#ffffff' }
                                 }
                             }
                         }
                     });
                     console.log('Trading chart created successfully');
                     
                     // Start loading real data immediately
                     loadRealBitgetData();
                 } else {
                     console.error('Trading chart canvas not found');
                 }
                 
                 // Initialize system health chart
                 const healthCtx = document.getElementById('health-chart');
                 if (healthCtx) {
                     charts.health = new Chart(healthCtx, {
                         type: 'radar',
                         data: {
                             labels: ['CPU', 'Memory', 'Network', 'Storage', 'Security'],
                             datasets: [{
                                 label: 'System Health',
                                 data: [95, 88, 92, 85, 98],
                                 borderColor: '#45b7d1',
                                 backgroundColor: 'rgba(69, 183, 209, 0.2)'
                             }]
                         },
                         options: {
                             responsive: true,
                             maintainAspectRatio: false,
                             plugins: {
                                 legend: { display: false }
                             },
                             scales: {
                                 r: { beginAtZero: true, max: 100 }
                             }
                         }
                     });
                 }
                 
                 // Initialize singularity performance chart
                 const singularityCtx = document.getElementById('singularity-performance-chart');
                 if (singularityCtx) {
                     charts.singularity = new Chart(singularityCtx, {
                         type: 'line',
                         data: {
                             labels: ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5'],
                             datasets: [{
                                 label: 'Performance Score',
                                 data: [0.6, 0.7, 0.8, 0.85, 0.9],
                                 borderColor: '#ff6b6b',
                                 backgroundColor: 'rgba(255, 107, 107, 0.1)',
                                 tension: 0.4
                             }]
                         },
                         options: {
                             responsive: true,
                             maintainAspectRatio: false,
                             plugins: {
                                 legend: { display: false }
                             },
                             scales: {
                                 y: { beginAtZero: true, max: 1 }
                             }
                         }
                     });
                 }
             }
             
             function refreshAnalytics() {
                 // Refresh all charts with new data
                 Object.values(charts).forEach(chart => {
                     if (chart && typeof chart.update === 'function') {
                         chart.update();
                     }
                 });
                 showNotification('📊 Analytics refreshed!', 'success');
             }
             
             function exportAnalytics() {
                 // Export chart data as JSON
                 const chartData = {};
                 Object.keys(charts).forEach(key => {
                     if (charts[key] && charts[key].data) {
                         chartData[key] = charts[key].data;
                     }
                 });
                 
                 const dataStr = JSON.stringify(chartData, null, 2);
                 const dataBlob = new Blob([dataStr], { type: 'application/json' });
                 const url = URL.createObjectURL(dataBlob);
                 const link = document.createElement('a');
                 link.href = url;
                 link.download = 'ai_analytics_data.json';
                 link.click();
                 
                 showNotification('📊 Analytics data exported!', 'success');
             }
             
             // Initialize charts when page loads
             document.addEventListener('DOMContentLoaded', function() {
                 initializeCharts();
                 
                 // Load persistence status
                 getPersistenceStatus();
                 
                 // Set up real-time chart updates
                 setInterval(function() {
                     updateChartsWithRealData();
                     updateChartsWithBitgetData();
                 }, 10000); // Update every 10 seconds
             });
             
             function updateChartsWithRealData() {
                 // Update consciousness chart with real data
                 if (charts.consciousness) {
                     const newData = generateRealTimeData(6);
                     charts.consciousness.data.datasets[0].data = newData;
                     charts.consciousness.update('none');
                 }
                 
                 // Update trading performance chart with real data
                 if (charts.trading) {
                     const newData = generateRealTimeData(6, 10, 20);
                     charts.trading.data.datasets[0].data = newData;
                     charts.trading.update('none');
                 }
                 
                 // Update system health chart with real data
                 if (charts.health) {
                     const newData = generateRealTimeData(5, 80, 100);
                     charts.health.data.datasets[0].data = newData;
                     charts.health.update('none');
                 }
                 
                 // Update singularity performance chart with real data
                 if (charts.singularity) {
                     const newData = generateRealTimeData(5, 0.5, 1.0);
                     charts.singularity.data.datasets[0].data = newData;
                     charts.singularity.update('none');
                 }
             }
             
             function generateRealTimeData(count, min = 0, max = 100) {
                 const data = [];
                 for (let i = 0; i < count; i++) {
                     data.push(Math.random() * (max - min) + min);
                 }
                 return data;
             }
             
             async function loadRealBitgetData() {
                 try {
                     console.log('Loading real Bitget data...');
                     const symbols = ['BTCUSDT', 'ETHUSDT'];
                     const prices = {};
                     
                     for (const symbol of symbols) {
                         // Try to get real data, fall back to demo if needed
                         try {
                             const response = await fetch(`/api/market/ticker/${symbol}`);
                             const data = await response.json();
                             
                             if (data.status === 'success' && data.data) {
                                 if (data.data.demo_mode) {
                                     // Use demo data
                                     prices[symbol] = {
                                         price: symbol === 'BTCUSDT' ? 45000 + Math.random() * 1000 : 3000 + Math.random() * 200,
                                         demo: true
                                     };
                                 } else {
                                     // Use real data
                                     prices[symbol] = {
                                         price: parseFloat(data.data.last || data.data.close || 0),
                                         demo: false
                                     };
                                 }
                             } else {
                                 // Fallback to demo data
                                 prices[symbol] = {
                                     price: symbol === 'BTCUSDT' ? 45000 + Math.random() * 1000 : 3000 + Math.random() * 200,
                                     demo: true
                                 };
                             }
                         } catch (error) {
                             console.log(`Error fetching ${symbol}:`, error);
                             // Fallback to demo data
                             prices[symbol] = {
                                 price: symbol === 'BTCUSDT' ? 45000 + Math.random() * 1000 : 3000 + Math.random() * 200,
                                 demo: true
                             };
                         }
                     }
                     
                     // Update trading chart with real/demo data
                     if (charts.trading) {
                         const timestamp = new Date().toLocaleTimeString();
                         
                         // Add new data points
                         charts.trading.data.labels.push(timestamp);
                         charts.trading.data.datasets[0].data.push(prices['BTCUSDT'].price);
                         charts.trading.data.datasets[1].data.push(prices['ETHUSDT'].price);
                         
                         // Keep only last 15 data points
                         if (charts.trading.data.labels.length > 15) {
                             charts.trading.data.labels.shift();
                             charts.trading.data.datasets[0].data.shift();
                             charts.trading.data.datasets[1].data.shift();
                         }
                         
                         charts.trading.update('none');
                         console.log('Chart updated with prices:', prices);
                     }
                     
                     // Show data source
                     const dataSource = Object.values(prices).some(p => !p.demo) ? 'Real Bitget Data' : 'Demo Data';
                     updateDataSourceDisplay(dataSource);
                     
                 } catch (error) {
                     console.error('Error loading Bitget data:', error);
                 }
             }
             
             async function updateChartsWithBitgetData() {
                 // This function calls loadRealBitgetData for regular updates
                 await loadRealBitgetData();
             }
             
             function updateDataSourceDisplay(source) {
                 // Update UI to show data source
                 const sourceElement = document.getElementById('data-source');
                 if (sourceElement) {
                     sourceElement.textContent = source;
                     sourceElement.className = source.includes('Real') ? 'real-data' : 'demo-data';
                 }
             }
             
             function updateTradingStatusWithRealData(priceData) {
                 try {
                     // Update the trading status display with real market data
                     priceData.forEach(({symbol, price, change}) => {
                         const priceElement = document.getElementById(`${symbol.toLowerCase()}-price`);
                         const changeElement = document.getElementById(`${symbol.toLowerCase()}-change`);
                         
                         if (priceElement) {
                             priceElement.textContent = `$${price.toLocaleString()}`;
                         }
                         if (changeElement) {
                             changeElement.textContent = `${change > 0 ? '+' : ''}${change.toFixed(2)}%`;
                             changeElement.className = change > 0 ? 'positive' : 'negative';
                         }
                     });
                 } catch (error) {
                     console.log('Error updating trading status:', error);
                 }
             }
             
             async function startLiveDataCollection() {
                 try {
                     const symbols = ['BTCUSDT', 'ETHUSDT', 'ADAUSDT'];
                     
                     for (const symbol of symbols) {
                         const response = await fetch(`/api/bitget/live-data/${symbol}`);
                         if (response.ok) {
                             const data = await response.json();
                             if (data.status === 'success') {
                                 console.log(`Live data collected for ${symbol}:`, data.data);
                                 
                                 // Store data for AI training
                                 if (!window.liveDataCollection) {
                                     window.liveDataCollection = {};
                                 }
                                 window.liveDataCollection[symbol] = data.data;
                                 
                                 // Update UI with live data
                                 updateLiveDataDisplay(symbol, data.data);
                             }
                         }
                     }
                     
                     showNotification('📊 Live data collection completed!', 'success');
                 } catch (error) {
                     console.error('Error collecting live data:', error);
                     showNotification('❌ Live data collection failed!', 'error');
                 }
             }
             
             function updateLiveDataDisplay(symbol, data) {
                 // Update live data display in the UI
                 const liveDataElement = document.getElementById('live-data-display');
                 if (liveDataElement) {
                     const price = data.features.price;
                     const volume = data.features.volume;
                     const change = data.features.price_change;
                     
                     liveDataElement.innerHTML += `
                         <div class="live-data-item">
                             <strong>${symbol}</strong>: $${price.toFixed(2)} 
                             (${change > 0 ? '+' : ''}${change.toFixed(2)}%) 
                             Vol: ${volume.toFixed(2)}
                         </div>
                     `;
                 }
             }
             
             // ===== AI MODEL TRAINING AND PRICE PREDICTION FUNCTIONS =====
             
             async function startPricePredictionTraining() {
                 try {
                     const modelType = document.getElementById('price-prediction-model-type').value || 'lstm';
                     const epochs = parseInt(document.getElementById('price-prediction-epochs').value) || 100;
                     const batchSize = parseInt(document.getElementById('price-prediction-batch-size').value) || 32;
                     const lookbackPeriod = parseInt(document.getElementById('lookback-period').value) || 60;
                     const predictionHorizon = parseInt(document.getElementById('prediction-horizon').value) || 24;
                     const symbols = document.getElementById('price-prediction-symbols').value.split(',').map(s => s.trim()) || ['BTCUSDT', 'ETHUSDT'];
                     
                     const trainingConfig = {
                         model_type: modelType,
                         symbols: symbols,
                         timeframe: '1h',
                         epochs: epochs,
                         batch_size: batchSize,
                         lookback_period: lookbackPeriod,
                         prediction_horizon: predictionHorizon
                     };
                     
                     const response = await fetch('/api/ai/train-price-prediction', {
                         method: 'POST',
                         headers: { 'Content-Type': 'application/json' },
                         body: JSON.stringify(trainingConfig)
                     });
                     
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         showNotification('🎯 Price Prediction Training started successfully!', 'success');
                         updateSystemStatus('training', 'Active');
                         loadSystemStatus();
                         startPricePredictionProgress();
                     } else {
                         showNotification('❌ Failed to start price prediction training: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error starting price prediction training: ' + error.message, 'error');
                 }
             }
             
             async function getPricePrediction() {
                 try {
                     const symbol = document.getElementById('prediction-symbol').value || 'BTCUSDT';
                     const timeframe = document.getElementById('prediction-timeframe').value || '1h';
                     const horizon = parseInt(document.getElementById('prediction-horizon-display').value) || 24;
                     
                     const predictionRequest = {
                         symbol: symbol,
                         timeframe: timeframe,
                         horizon: horizon
                     };
                     
                     const response = await fetch('/api/ai/predict-price', {
                         method: 'POST',
                         headers: { 'Content-Type': 'application/json' },
                         body: JSON.stringify(predictionRequest)
                     });
                     
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         const prediction = data.data;
                         document.getElementById('current-price').textContent = '$' + prediction.current_price.toLocaleString();
                         document.getElementById('predicted-price').textContent = '$' + prediction.predicted_price.toLocaleString();
                         document.getElementById('prediction-confidence').textContent = (prediction.confidence * 100).toFixed(1) + '%';
                         document.getElementById('prediction-horizon-display').textContent = horizon + ' hours';
                         
                         showNotification('🔮 Price prediction generated successfully!', 'success');
                         updatePricePredictionChart(prediction);
                     } else {
                         showNotification('❌ Failed to get price prediction: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error getting price prediction: ' + error.message, 'error');
                 }
             }
             
             async function getModelPerformance() {
                 try {
                     const response = await fetch('/api/ai/model-performance');
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         const performance = data.data;
                         document.getElementById('model-accuracy').textContent = (performance.accuracy * 100).toFixed(1) + '%';
                         document.getElementById('model-mae').textContent = performance.mae.toFixed(3);
                         document.getElementById('model-rmse').textContent = performance.rmse.toFixed(3);
                         document.getElementById('model-r2').textContent = performance.r2_score.toFixed(3);
                         document.getElementById('training-samples').textContent = performance.training_samples.toLocaleString();
                         
                         showNotification('📊 Model performance metrics loaded!', 'success');
                         updateModelPerformanceChart(performance);
                     } else {
                         showNotification('❌ Failed to load model performance: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error loading model performance: ' + error.message, 'error');
                 }
             }
             
             function startPricePredictionProgress() {
                 // Simulate price prediction training progress
                 let progress = 0;
                 const progressBar = document.getElementById('price-prediction-progress');
                 if (progressBar) {
                     const interval = setInterval(() => {
                         progress += Math.random() * 8;
                         if (progress >= 100) {
                             progress = 100;
                             clearInterval(interval);
                             showNotification('🎯 Price Prediction Training completed!', 'success');
                         }
                         progressBar.style.width = progress + '%';
                         progressBar.textContent = Math.round(progress) + '%';
                     }, 800);
                 }
             }
             
             function updatePricePredictionChart(prediction) {
                 // Update price prediction chart
                 if (charts.pricePrediction) {
                     const newData = {
                         current: prediction.current_price,
                         predicted: prediction.predicted_price,
                         confidence: prediction.confidence
                     };
                     
                     charts.pricePrediction.data.datasets[0].data = [newData.current, newData.predicted];
                     charts.pricePrediction.update();
                 }
             }
             
             function updateModelPerformanceChart(performance) {
                 // Update model performance chart
                 if (charts.modelPerformance) {
                     charts.modelPerformance.data.datasets[0].data = [
                         performance.accuracy * 100,
                         (1 - performance.mae) * 100,
                         (1 - performance.rmse) * 100,
                         performance.r2_score * 100
                     ];
                     charts.modelPerformance.update();
                 }
             }
             
             // Show/hide prediction results and model performance
             function showPredictionResults() {
                 document.getElementById('prediction-results').style.display = 'block';
             }
             
             function showModelPerformance() {
                 document.getElementById('model-performance').style.display = 'block';
             }
             
             // Update the getPricePrediction function to show results
             async function getPricePrediction() {
                 try {
                     const symbol = document.getElementById('prediction-symbol')?.value || 'BTCUSDT';
                     const timeframe = document.getElementById('prediction-timeframe')?.value || '1h';
                     const horizon = parseInt(document.getElementById('prediction-horizon-display')?.value) || 24;
                     
                     const predictionRequest = {
                         symbol: symbol,
                         timeframe: timeframe,
                         horizon: horizon
                     };
                     
                     const response = await fetch('/api/ai/predict-price', {
                         method: 'POST',
                         headers: { 'Content-Type': 'application/json' },
                         body: JSON.stringify(predictionRequest)
                     });
                     
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         const prediction = data.data;
                         document.getElementById('current-price').textContent = '$' + prediction.current_price.toLocaleString();
                         document.getElementById('predicted-price').textContent = '$' + prediction.predicted_price.toLocaleString();
                         document.getElementById('prediction-confidence').textContent = (prediction.confidence * 100).toFixed(1) + '%';
                         document.getElementById('prediction-horizon-display').textContent = horizon + ' hours';
                         
                         showPredictionResults();
                         showNotification('🔮 Price prediction generated successfully!', 'success');
                         updatePricePredictionChart(prediction);
                     } else {
                         showNotification('❌ Failed to get price prediction: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error getting price prediction: ' + error.message, 'error');
                 }
             }
             
             // Update the getModelPerformance function to show results
             async function getModelPerformance() {
                 try {
                     const response = await fetch('/api/ai/model-performance');
                     const data = await response.json();
                     
                     if (data.status === 'success') {
                         const performance = data.data;
                         document.getElementById('model-accuracy').textContent = (performance.accuracy * 100).toFixed(1) + '%';
                         document.getElementById('model-mae').textContent = performance.mae.toFixed(3);
                         document.getElementById('model-rmse').textContent = performance.rmse.toFixed(3);
                         document.getElementById('model-r2').textContent = performance.r2_score.toFixed(3);
                         document.getElementById('training-samples').textContent = performance.training_samples.toLocaleString();
                         
                         showModelPerformance();
                         showNotification('📊 Model performance metrics loaded!', 'success');
                         updateModelPerformanceChart(performance);
                     } else {
                         showNotification('❌ Failed to load model performance: ' + data.error, 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error loading model performance: ' + error.message, 'error');
                 }
             }
             
             async function testBitgetConnection() {
                 try {
                     const response = await fetch('/api/bitget/test-connection');
                     const result = await response.json();
                     
                     if (result.status === 'success') {
                         showNotification('✅ Bitget connection successful!', 'success');
                         console.log('Connection details:', result);
                     } else {
                         showNotification(`❌ Bitget connection failed: ${result.message}`, 'error');
                         console.error('Connection error:', result);
                     }
                 } catch (error) {
                     showNotification('❌ Connection test failed!', 'error');
                     console.error('Test error:', error);
                 }
             }
             
             // ===== PERSISTENCE SYSTEM FUNCTIONS =====
             
             async function getPersistenceStatus() {
                 try {
                     const response = await fetch('/api/persistence/status');
                     const result = await response.json();
                     
                     if (result.status === 'success') {
                         const data = result.data;
                         
                         // Update UI with persistence status
                         document.getElementById('auto-save-interval').textContent = data.auto_save_interval;
                         document.getElementById('data-directory').textContent = data.data_directory.split('/').pop();
                         document.getElementById('total-files').textContent = `${data.summary.total_files} files`;
                         
                         showNotification('📊 Persistence status loaded!', 'success');
                         console.log('Persistence status:', data);
                     } else {
                         showNotification('❌ Failed to get persistence status!', 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error getting persistence status!', 'error');
                     console.error('Persistence status error:', error);
                 }
             }
             
             async function restoreSystemState() {
                 try {
                     const response = await fetch('/api/persistence/restore', {
                         method: 'POST'
                     });
                     const result = await response.json();
                     
                     if (result.status === 'success') {
                         showNotification('🔄 System state restored successfully!', 'success');
                         
                         // Refresh system status display
                         loadSystemStatus();
                         
                         console.log('System restored:', result);
                     } else {
                         showNotification('❌ Failed to restore system state!', 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error restoring system state!', 'error');
                     console.error('Restore error:', error);
                 }
             }
             
             async function exportAllData() {
                 try {
                     // Get persistence status first
                     const response = await fetch('/api/persistence/status');
                     const result = await response.json();
                     
                     if (result.status === 'success') {
                         const data = result.data;
                         
                         // Create export data
                         const exportData = {
                             timestamp: new Date().toISOString(),
                             persistence_status: data,
                             system_status: {
                                 trading: trading_system_status,
                                 ai: ai_systems_status
                             }
                         };
                         
                         // Download as JSON file
                         const dataStr = JSON.stringify(exportData, null, 2);
                         const dataBlob = new Blob([dataStr], { type: 'application/json' });
                         const url = URL.createObjectURL(dataBlob);
                         const link = document.createElement('a');
                         link.href = url;
                         link.download = `ale_ai_export_${new Date().toISOString().split('T')[0]}.json`;
                         link.click();
                         
                         showNotification('📤 All data exported successfully!', 'success');
                     } else {
                         showNotification('❌ Failed to export data!', 'error');
                     }
                 } catch (error) {
                     showNotification('❌ Error exporting data!', 'error');
                     console.error('Export error:', error);
                 }
             }
         </script>
    </body>
    </html>
    